[
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#about-us",
    "href": "talks/talk-rladies-ams-rtp.html#about-us",
    "title": "Tidy Data,Weighted Insights",
    "section": "About us",
    "text": "About us\n\n\n Stephanie Zimmer\nRTI International\n\n Rebecca Powell\nFors Marsh\n\n Isabella Velásquez\nPosit"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#motivation",
    "href": "talks/talk-rladies-ams-rtp.html#motivation",
    "title": "Tidy Data,Weighted Insights",
    "section": "Motivation",
    "text": "Motivation\n\nWe are R users who work with survey data regularly\nShare knowledge with\n\nR users who are inaccurately analyzing survey data\nSAS/SUDAAN/Stata users who may not know about the capabilities of R\n\n{srvyr} package developed using tidyverse style syntax\nStephanie and Rebecca conducted a virtual short course at AAPOR conference in 2021\nConnected with Isabella to turn the short course into a book\n\n\n\n{survey} original survey analysis package – book by Thomas Lumley\n{srvyr} builds off the {survey} package, but uses easier to understand tidyverse syntax style"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#whats-in-the-book",
    "href": "talks/talk-rladies-ams-rtp.html#whats-in-the-book",
    "title": "Tidy Data,Weighted Insights",
    "section": "What’s in the book",
    "text": "What’s in the book\n\nHigh level overview of survey process\nComparison of syntax between {dplyr} and {srvyr}\nHow to read survey documentation\nDescriptive analysis, statistical testing, and modeling\nPublication ready tables and figures accounting for error\nCreating the survey design object\nAnalysis examples using real world data\n\n\n\nAssume that weights are already on the dataset\nDoes not include how to create weights"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#why-weight",
    "href": "talks/talk-rladies-ams-rtp.html#why-weight",
    "title": "Tidy Data,Weighted Insights",
    "section": "Why weight?",
    "text": "Why weight?\n\nWeights are constructed based on the probability of selection into survey and adjusted for coverage population\nUsing weights reduces the potential of bias\nWeights are often adjusted by demographics and variables likely correlated with outcomes"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#why-weight-1",
    "href": "talks/talk-rladies-ams-rtp.html#why-weight-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Why weight?",
    "text": "Why weight?\n\n\n\nExample 1: Survey of inmates (hypothetical). More predominately male facilities than female facilities so female facilities are oversampled. Weights are calculated to reflect the actual proportion for the population\nExample 2: Survey of households about energy consumption and expenditure (RECS). Weighting accounts for age of housing unit, type of housing unit, and state\nExample 3: Sample of US citizens about election (ANES). Weighting accounts for: Age by gender;\n\nRace/ethnicity by educational attainment;\nMarital status by gender;\nRace/ethnicity by Census region;\nNation of birth;\nHome tenure by Metropolitan status;\nPopulation density;\nHousehold income;\nEarly voter status"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#why-weight-2",
    "href": "talks/talk-rladies-ams-rtp.html#why-weight-2",
    "title": "Tidy Data,Weighted Insights",
    "section": "Why weight?",
    "text": "Why weight?\n\n\n\n\n\n\n\nThe 1936 Literary Digest Poll is a classic example of a flawed survey. They polled millions of people to predict the U.S. presidential election and forecasted a landslide victory for Alf Landon over Franklin D. Roosevelt. However, their survey sample was biased because it relied on telephone directories and automobile registration lists, which disproportionately included wealthier (and more Republican-leaning) voters. The result was a wildly inaccurate prediction.\n\n\nTruman Library Institute"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#strata-psu-clusters-replicate-weights",
    "href": "talks/talk-rladies-ams-rtp.html#strata-psu-clusters-replicate-weights",
    "title": "Tidy Data,Weighted Insights",
    "section": "Strata? PSU? Clusters? Replicate weights?",
    "text": "Strata? PSU? Clusters? Replicate weights?\n\nThe strata/PSU or replicate weights are used to accurately estimate standard errors and perform statistical tests (correct degrees of freedom)\nThe packages we introduce take these as parameters and accurately calculate standard errors, confidence intervals, and p-values accounting for the covariance structure\nOnly need to specify once - documentation will help you identify elements and sometimes provides SAS, SUDAAN, or even R syntax to get started"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#r-packages-for-survey-analysis",
    "href": "talks/talk-rladies-ams-rtp.html#r-packages-for-survey-analysis",
    "title": "Tidy Data,Weighted Insights",
    "section": "R packages for survey analysis",
    "text": "R packages for survey analysis\n\n{survey} package first on CRAN in 2003\n\ndescriptive analysis\nstatistical testing\nmodeling\nweighting\n\n{srvyr} package first on CRAN in 2016\n\n“wrapper” for {survey} with {tidyverse}-style syntax\nonly descriptive analysis\n\n{gtsummary} package first on CRAN in 2016\n\ncreates publication-ready tables from survey data\ncurrently cannot handle replicate weights\n\n\n\n\nR packages are a collection of functions\nThis is not an exhaustive list of packages that work with survey data\nSeveral packages for imputation, more complex weighting, and more\ngtsummary won’t be discussed today"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#comparison-with-dplyr",
    "href": "talks/talk-rladies-ams-rtp.html#comparison-with-dplyr",
    "title": "Tidy Data,Weighted Insights",
    "section": "Comparison with dplyr",
    "text": "Comparison with dplyr\n\ndplyr: summary functions called within summarize()\n\ndplyr\n\ntowny %&gt;%\n  group_by(status) %&gt;%\n  summarize(\n    area_mean = mean(land_area_km2),\n    area_median = median(land_area_km2)\n  )\n\n# A tibble: 2 × 3\n  status      area_mean area_median\n  &lt;chr&gt;           &lt;dbl&gt;       &lt;dbl&gt;\n1 lower-tier       362.        310.\n2 single-tier      388.        194."
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#comparison-with-dplyr-1",
    "href": "talks/talk-rladies-ams-rtp.html#comparison-with-dplyr-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Comparison with dplyr",
    "text": "Comparison with dplyr\n\nsrvyr: survey_*() functions called with summarize()\n\nsrvyr\n\napistrat_des %&gt;%\n  group_by(stype) %&gt;%\n  summarize(\n    api00_mean = survey_mean(api00),\n    api00_med = survey_median(api00)\n  )\n\n# A tibble: 3 × 5\n  stype api00_mean api00_mean_se api00_med api00_med_se\n  &lt;fct&gt;      &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;\n1 E           674.          12.5       671         20.7\n2 H           626.          15.5       635         21.6\n3 M           637.          16.6       648         24.1\n\n\n\n\nIf you already use {tidyverse}/{dplyr}, the syntax {srvyr} will come easily\nFunctions commonly used like group_by, filter, and summarize also used in srvyr\nNote that the survey estimates also generate standard deviations - can also add options to get CIs, deffs, and variances"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#steps-for-descriptive-analysis",
    "href": "talks/talk-rladies-ams-rtp.html#steps-for-descriptive-analysis",
    "title": "Tidy Data,Weighted Insights",
    "section": "Steps for descriptive analysis",
    "text": "Steps for descriptive analysis\n\nCreate a tbl_svy object (a survey object) using: as_survey_design() or as_survey_rep()\nSubset data (if needed) using filter() (to create subpopulations)\nSpecify domains of analysis using group_by()\nWithin summarize(), specify variables to calculate, including means, totals, proportions, quantiles, and more\n\n\n\nSurvey object involves specifying weights, strata and/or clusters (PSUs) OR replicate weights\nSurvey object can be used over and over for the same data and different analyses\nThis is necessary for getting appropriate weighted estimates and standard errors. More public use files are providing this syntax\nCan also use cascade() instead of summarize() to get the total row"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#steps-for-testing",
    "href": "talks/talk-rladies-ams-rtp.html#steps-for-testing",
    "title": "Tidy Data,Weighted Insights",
    "section": "Steps for testing",
    "text": "Steps for testing\n\nCreate a tbl_svy object (a survey object) using: as_survey_design() or as_survey_rep()\nSubset data (if needed) using filter() (to create subpopulations)\nUse svyttest() for comparisons of proportions and means, svygofchisq() for GOF test, or svychisq() for test of independence and test of homogeneity\n\n\n\nOnly last step changes from descriptive analysis."
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#steps-for-modeling",
    "href": "talks/talk-rladies-ams-rtp.html#steps-for-modeling",
    "title": "Tidy Data,Weighted Insights",
    "section": "Steps for modeling",
    "text": "Steps for modeling\n\nCreate a tbl_svy object (a survey object) using: as_survey_design() or as_survey_rep()\nSubset data (if needed) using filter() (to create subpopulations)\nUse svyglm() for linear models and logistic models, svycoxph() for Cox proportional-hazards, svykm() for Kaplan-Meier, svyloglin() for log-linear models, svyolr() for multinomial\n\n\n\nOnly last step changes from descriptive analysis. Syntax mirrors glm, coxph, etc functions for non-survey data"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#load-packages-and-data-1",
    "href": "talks/talk-rladies-ams-rtp.html#load-packages-and-data-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Load packages and data",
    "text": "Load packages and data\n\n# install.packages(c(\"survey\", \"srvyr\", \"gt\"))\n# pak::pak(\"tidy-survey-r/srvyrexploR\")\nlibrary(survey)\nlibrary(srvyr)\nlibrary(gt)\nlibrary(srvyrexploR)\n\nsummary(recs_2020)\n\n     DOEID           ClimateRegion_BA         Urbanicity          Region    \n Min.   :100001   Cold       :7116    Urban Area   :12395   Northeast:3657  \n 1st Qu.:104625   Mixed-Humid:5579    Urban Cluster: 2020   Midwest  :3832  \n Median :109248   Hot-Humid  :2545    Rural        : 4081   South    :6426  \n Mean   :109248   Hot-Dry    :1577                          West     :4581  \n 3rd Qu.:113872   Marine     : 911                                          \n Max.   :118496   Very-Cold  : 572                                          \n                  (Other)    : 196                                          \n   REGIONC                        Division     STATE_FIPS       \n Length:18496       South Atlantic    :3256   Length:18496      \n Class :character   Pacific           :2497   Class :character  \n Mode  :character   East North Central:2014   Mode  :character  \n                    Middle Atlantic   :1977                     \n                    West South Central:1827                     \n                    West North Central:1818                     \n                    (Other)           :5107                     \n  state_postal           state_name        HDD65           CDD65     \n CA     : 1152   California   : 1152   Min.   :    0   Min.   :   0  \n TX     : 1016   Texas        : 1016   1st Qu.: 2434   1st Qu.: 814  \n NY     :  904   New York     :  904   Median : 4396   Median :1179  \n FL     :  655   Florida      :  655   Mean   : 4272   Mean   :1526  \n PA     :  617   Pennsylvania :  617   3rd Qu.: 5810   3rd Qu.:1805  \n MA     :  552   Massachusetts:  552   Max.   :17383   Max.   :5534  \n (Other):13600   (Other)      :13600                                 \n    HDD30YR         CDD30YR                       HousingUnitType \n Min.   :    0   Min.   :   0   Mobile home               :  974  \n 1st Qu.: 2898   1st Qu.: 601   Single-family detached    :12319  \n Median : 4825   Median :1020   Single-family attached    : 1751  \n Mean   : 4679   Mean   :1310   Apartment: 2-4 Units      : 1013  \n 3rd Qu.: 6290   3rd Qu.:1703   Apartment: 5 or more units: 2439  \n Max.   :16071   Max.   :4905                                     \n                                                                  \n        YearMade      TOTSQFT_EN       TOTHSQFT        TOTCSQFT    \n 1970-1979  :2817   Min.   :  200   Min.   :    0   Min.   :    0  \n 2000-2009  :2748   1st Qu.: 1100   1st Qu.: 1000   1st Qu.:  460  \n Before 1950:2721   Median : 1700   Median : 1520   Median : 1200  \n 1990-1999  :2451   Mean   : 1960   Mean   : 1744   Mean   : 1394  \n 1980-1989  :2435   3rd Qu.: 2510   3rd Qu.: 2300   3rd Qu.: 2000  \n 1960-1969  :1867   Max.   :15000   Max.   :15000   Max.   :14600  \n (Other)    :3457                                                  \n SpaceHeatingUsed   ACUsed       \n Mode :logical    Mode :logical  \n FALSE:751        FALSE:2325     \n TRUE :17745      TRUE :16171    \n                                 \n                                 \n                                 \n                                 \n                                                               HeatingBehavior\n Set one temp and leave it                                             :7806  \n Manually adjust at night/no one home                                  :4654  \n Programmable or smart thermostat automatically adjusts the temperature:3310  \n Turn on or off as needed                                              :1491  \n No control                                                            : 438  \n Other                                                                 :  46  \n NA's                                                                  : 751  \n WinterTempDay   WinterTempAway  WinterTempNight\n Min.   :50.00   Min.   :50.00   Min.   :50.00  \n 1st Qu.:68.00   1st Qu.:65.00   1st Qu.:65.00  \n Median :70.00   Median :68.00   Median :68.00  \n Mean   :69.77   Mean   :67.45   Mean   :68.01  \n 3rd Qu.:72.00   3rd Qu.:70.00   3rd Qu.:70.00  \n Max.   :90.00   Max.   :90.00   Max.   :90.00  \n NA's   :751     NA's   :751     NA's   :751    \n                                                                  ACBehavior  \n Set one temp and leave it                                             :6738  \n Manually adjust at night/no one home                                  :3637  \n Programmable or smart thermostat automatically adjusts the temperature:2638  \n Turn on or off as needed                                              :2746  \n No control                                                            : 409  \n Other                                                                 :   3  \n NA's                                                                  :2325  \n SummerTempDay   SummerTempAway  SummerTempNight    NWEIGHT       \n Min.   :50.00   Min.   :50.00   Min.   :50.00   Min.   :  437.9  \n 1st Qu.:70.00   1st Qu.:70.00   1st Qu.:68.00   1st Qu.: 4018.7  \n Median :72.00   Median :74.00   Median :72.00   Median : 6119.4  \n Mean   :72.01   Mean   :73.45   Mean   :71.22   Mean   : 6678.7  \n 3rd Qu.:75.00   3rd Qu.:78.00   3rd Qu.:74.00   3rd Qu.: 8890.0  \n Max.   :90.00   Max.   :90.00   Max.   :90.00   Max.   :29279.1  \n NA's   :2325    NA's   :2325    NA's   :2325                     \n    NWEIGHT1        NWEIGHT2        NWEIGHT3        NWEIGHT4    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3950   1st Qu.: 3951   1st Qu.: 3954   1st Qu.: 3953  \n Median : 6136   Median : 6151   Median : 6151   Median : 6153  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8976   3rd Qu.: 8979   3rd Qu.: 8994   3rd Qu.: 8998  \n Max.   :30015   Max.   :29422   Max.   :29431   Max.   :29494  \n                                                                \n    NWEIGHT5        NWEIGHT6        NWEIGHT7        NWEIGHT8    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3957   1st Qu.: 3966   1st Qu.: 3944   1st Qu.: 3956  \n Median : 6134   Median : 6147   Median : 6135   Median : 6151  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8987   3rd Qu.: 8984   3rd Qu.: 8998   3rd Qu.: 8988  \n Max.   :30039   Max.   :29419   Max.   :29586   Max.   :29499  \n                                                                \n    NWEIGHT9       NWEIGHT10       NWEIGHT11       NWEIGHT12    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3947   1st Qu.: 3961   1st Qu.: 3950   1st Qu.: 3947  \n Median : 6139   Median : 6163   Median : 6140   Median : 6160  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8974   3rd Qu.: 8994   3rd Qu.: 8991   3rd Qu.: 8988  \n Max.   :29845   Max.   :29635   Max.   :29681   Max.   :29849  \n                                                                \n   NWEIGHT13       NWEIGHT14       NWEIGHT15       NWEIGHT16    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3967   1st Qu.: 3962   1st Qu.: 3958   1st Qu.: 3958  \n Median : 6142   Median : 6154   Median : 6145   Median : 6133  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8977   3rd Qu.: 8981   3rd Qu.: 8997   3rd Qu.: 8979  \n Max.   :29843   Max.   :30184   Max.   :29970   Max.   :29825  \n                                                                \n   NWEIGHT17       NWEIGHT18       NWEIGHT19       NWEIGHT20    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3958   1st Qu.: 3937   1st Qu.: 3947   1st Qu.: 3943  \n Median : 6126   Median : 6155   Median : 6153   Median : 6139  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8977   3rd Qu.: 8993   3rd Qu.: 8979   3rd Qu.: 8992  \n Max.   :30606   Max.   :29689   Max.   :29336   Max.   :30274  \n                                                                \n   NWEIGHT21       NWEIGHT22       NWEIGHT23       NWEIGHT24    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3960   1st Qu.: 3964   1st Qu.: 3943   1st Qu.: 3946  \n Median : 6135   Median : 6149   Median : 6148   Median : 6136  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8956   3rd Qu.: 8988   3rd Qu.: 8980   3rd Qu.: 8978  \n Max.   :29766   Max.   :29791   Max.   :30126   Max.   :29946  \n                                                                \n   NWEIGHT25       NWEIGHT26       NWEIGHT27       NWEIGHT28    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3952   1st Qu.: 3966   1st Qu.: 3942   1st Qu.: 3956  \n Median : 6150   Median : 6136   Median : 6125   Median : 6149  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8972   3rd Qu.: 8980   3rd Qu.: 8996   3rd Qu.: 8989  \n Max.   :30445   Max.   :29893   Max.   :30030   Max.   :29599  \n                                                                \n   NWEIGHT29       NWEIGHT30       NWEIGHT31       NWEIGHT32    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3970   1st Qu.: 3956   1st Qu.: 3944   1st Qu.: 3954  \n Median : 6146   Median : 6149   Median : 6144   Median : 6159  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8979   3rd Qu.: 8991   3rd Qu.: 8994   3rd Qu.: 8982  \n Max.   :30136   Max.   :29895   Max.   :29604   Max.   :29310  \n                                                                \n   NWEIGHT33       NWEIGHT34       NWEIGHT35       NWEIGHT36    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3964   1st Qu.: 3950   1st Qu.: 3967   1st Qu.: 3948  \n Median : 6148   Median : 6139   Median : 6141   Median : 6149  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8993   3rd Qu.: 8985   3rd Qu.: 8990   3rd Qu.: 8979  \n Max.   :29408   Max.   :29564   Max.   :30437   Max.   :27896  \n                                                                \n   NWEIGHT37       NWEIGHT38       NWEIGHT39       NWEIGHT40    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3955   1st Qu.: 3954   1st Qu.: 3940   1st Qu.: 3959  \n Median : 6133   Median : 6139   Median : 6147   Median : 6144  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8975   3rd Qu.: 8974   3rd Qu.: 8991   3rd Qu.: 8980  \n Max.   :30596   Max.   :30130   Max.   :29262   Max.   :30344  \n                                                                \n   NWEIGHT41       NWEIGHT42       NWEIGHT43       NWEIGHT44    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3975   1st Qu.: 3949   1st Qu.: 3947   1st Qu.: 3956  \n Median : 6153   Median : 6137   Median : 6157   Median : 6148  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8982   3rd Qu.: 8988   3rd Qu.: 9005   3rd Qu.: 8986  \n Max.   :29594   Max.   :29938   Max.   :29878   Max.   :29896  \n                                                                \n   NWEIGHT45       NWEIGHT46       NWEIGHT47       NWEIGHT48    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3952   1st Qu.: 3966   1st Qu.: 3938   1st Qu.: 3953  \n Median : 6149   Median : 6152   Median : 6150   Median : 6139  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8992   3rd Qu.: 8959   3rd Qu.: 8991   3rd Qu.: 8991  \n Max.   :29729   Max.   :29103   Max.   :30070   Max.   :29343  \n                                                                \n   NWEIGHT49       NWEIGHT50       NWEIGHT51       NWEIGHT52    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3947   1st Qu.: 3948   1st Qu.: 3958   1st Qu.: 3938  \n Median : 6146   Median : 6159   Median : 6150   Median : 6154  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8990   3rd Qu.: 8995   3rd Qu.: 8992   3rd Qu.: 9012  \n Max.   :29590   Max.   :30027   Max.   :29247   Max.   :29445  \n                                                                \n   NWEIGHT53       NWEIGHT54       NWEIGHT55       NWEIGHT56    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3959   1st Qu.: 3954   1st Qu.: 3945   1st Qu.: 3957  \n Median : 6156   Median : 6151   Median : 6143   Median : 6153  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8979   3rd Qu.: 8973   3rd Qu.: 8977   3rd Qu.: 8995  \n Max.   :30131   Max.   :29439   Max.   :29216   Max.   :29203  \n                                                                \n   NWEIGHT57       NWEIGHT58       NWEIGHT59       NWEIGHT60    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3942   1st Qu.: 3962   1st Qu.: 3965   1st Qu.: 3953  \n Median : 6138   Median : 6137   Median : 6144   Median : 6140  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 9004   3rd Qu.: 8986   3rd Qu.: 8977   3rd Qu.: 8983  \n Max.   :29819   Max.   :29818   Max.   :29606   Max.   :29818  \n                                                                \n     BTUEL             DOLLAREL           BTUNG            DOLLARNG     \n Min.   :   143.3   Min.   : -889.5   Min.   :      0   Min.   :   0.0  \n 1st Qu.: 20205.8   1st Qu.:  836.5   1st Qu.:      0   1st Qu.:   0.0  \n Median : 31890.0   Median : 1257.9   Median :  22012   Median : 313.9  \n Mean   : 37016.2   Mean   : 1424.8   Mean   :  36960   Mean   : 396.0  \n 3rd Qu.: 48298.0   3rd Qu.: 1819.0   3rd Qu.:  62714   3rd Qu.: 644.9  \n Max.   :628155.5   Max.   :15680.2   Max.   :1134709   Max.   :8155.0  \n                                                                        \n     BTULP           DOLLARLP           BTUFO           DOLLARFO      \n Min.   :     0   Min.   :   0.00   Min.   :     0   Min.   :   0.00  \n 1st Qu.:     0   1st Qu.:   0.00   1st Qu.:     0   1st Qu.:   0.00  \n Median :     0   Median :   0.00   Median :     0   Median :   0.00  \n Mean   :  3917   Mean   :  80.89   Mean   :  5109   Mean   :  88.43  \n 3rd Qu.:     0   3rd Qu.:   0.00   3rd Qu.:     0   3rd Qu.:   0.00  \n Max.   :364215   Max.   :6621.44   Max.   :426268   Max.   :7003.69  \n                                                                      \n    BTUWOOD          TOTALBTU          TOTALDOL      \n Min.   :     0   Min.   :   1182   Min.   : -150.5  \n 1st Qu.:     0   1st Qu.:  45565   1st Qu.: 1258.3  \n Median :     0   Median :  74180   Median : 1793.2  \n Mean   :  3596   Mean   :  83002   Mean   : 1990.2  \n 3rd Qu.:     0   3rd Qu.: 108535   3rd Qu.: 2472.0  \n Max.   :500000   Max.   :1367548   Max.   :20043.4"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#syntax-common-sampling-designs",
    "href": "talks/talk-rladies-ams-rtp.html#syntax-common-sampling-designs",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: common sampling designs",
    "text": "Syntax: common sampling designs\nThe as_survey_design() function is used for most common sampling designs, such as stratified or clustered designs.\nas_survey_design(\n  .data,\n  ids = NULL,\n  probs = NULL,\n  strata = NULL,\n  variables = NULL,\n  fpc = NULL,\n  nest = FALSE,\n  check_strata = !nest,\n  weights = NULL,\n  pps = FALSE,\n  variance = c(\"HT\", \"YG\"),\n  ...\n)"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#syntax-common-sampling-designs-1",
    "href": "talks/talk-rladies-ams-rtp.html#syntax-common-sampling-designs-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: common sampling designs",
    "text": "Syntax: common sampling designs\nThe as_survey_design() function is used for most common sampling designs, such as stratified or clustered designs.\n\nas_survey_design(\n  .data,\n  ids = NULL,\n  probs = NULL,\n  strata = NULL,\n  variables = NULL,\n  fpc = NULL,\n  nest = FALSE,\n  check_strata = !nest,\n  weights = NULL,\n  pps = FALSE,\n  variance = c(\"HT\", \"YG\"),\n  ...\n)\n\n\n\nFor a stratified sample, use the strata argument to specify the variable with the strata information"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#syntax-common-sampling-designs-2",
    "href": "talks/talk-rladies-ams-rtp.html#syntax-common-sampling-designs-2",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: common sampling designs",
    "text": "Syntax: common sampling designs\nThe as_survey_design() function is used for most common sampling designs, such as stratified or clustered designs.\n\nas_survey_design(\n  .data,\n  ids = NULL,\n  probs = NULL,\n  strata = NULL,\n  variables = NULL,\n  fpc = NULL,\n  nest = FALSE,\n  check_strata = !nest,\n  weights = NULL,\n  pps = FALSE,\n  variance = c(\"HT\", \"YG\"),\n  ...\n)\n\n\n\nFor a clustered sample, use the ids argument to specify the variable(s) for Primary Sampling Units (PSUs) and Secondary Sampling Units (SSUs)"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#syntax-common-sampling-designs-3",
    "href": "talks/talk-rladies-ams-rtp.html#syntax-common-sampling-designs-3",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: common sampling designs",
    "text": "Syntax: common sampling designs\nThe as_survey_design() function is used for most common sampling designs, such as stratified or clustered designs.\n\nas_survey_design(\n  .data,\n  ids = NULL,\n  probs = NULL,\n  strata = NULL,\n  variables = NULL,\n  fpc = NULL,\n  nest = FALSE,\n  check_strata = !nest,\n  weights = NULL,\n  pps = FALSE,\n  variance = c(\"HT\", \"YG\"),\n  ...\n)\n\n\n\nCan also specify the fpc variable and if cluster IDs are nested within strata"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#syntax-common-sampling-designs-4",
    "href": "talks/talk-rladies-ams-rtp.html#syntax-common-sampling-designs-4",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: common sampling designs",
    "text": "Syntax: common sampling designs\nThe as_survey_design() function is used for most common sampling designs, such as stratified or clustered designs.\n\nas_survey_design(\n  .data,\n  ids = NULL,\n  probs = NULL,\n  strata = NULL,\n  variables = NULL,\n  fpc = NULL,\n  nest = FALSE,\n  check_strata = !nest,\n  weights = NULL,\n  pps = FALSE,\n  variance = c(\"HT\", \"YG\"),\n  ...\n)\n\n\n\nThe weights argument is for the main analytic weight that should be used"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#syntax-replicate-weights",
    "href": "talks/talk-rladies-ams-rtp.html#syntax-replicate-weights",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: replicate weights",
    "text": "Syntax: replicate weights\nFor studies with replicate weights, create the survey object using the as_survey_rep() function.\nas_survey_rep(\n  .data,\n  variables = NULL,\n  weights = NULL,\n  repweights = NULL,\n  type = c(\"BRR\", \"Fay\", \"JK1\", \"JKn\", \"bootstrap\", \n           \"successive-difference\", \"ACS\", \"other\"),\n  combined_weights = TRUE,\n  rho = NULL,\n  bootstrap_average = NULL,\n  scale = NULL,\n  rscales = NULL,\n  fpc = NULL,\n  fpctype = c(\"fraction\", \"correction\"),\n  mse = getOption(\"survey.replicates.mse\"),\n  degf = NULL,\n  ...\n)"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#syntax-replicate-weights-1",
    "href": "talks/talk-rladies-ams-rtp.html#syntax-replicate-weights-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: replicate weights",
    "text": "Syntax: replicate weights\nFor studies with replicate weights, create the survey object using the as_survey_rep() function.\n\nas_survey_rep(\n  .data,\n  variables = NULL,\n  weights = NULL,\n  repweights = NULL,\n  type = c(\"BRR\", \"Fay\", \"JK1\", \"JKn\", \"bootstrap\", \n           \"successive-difference\", \"ACS\",\"other\"),\n  combined_weights = TRUE,\n  rho = NULL,\n  bootstrap_average = NULL,\n  scale = NULL,\n  rscales = NULL,\n  fpc = NULL,\n  fpctype = c(\"fraction\", \"correction\"),\n  mse = getOption(\"survey.replicates.mse\"),\n  degf = NULL,\n  ...\n)\n\n\n\nAs with the first function, there is a weights argument for the main analytic weight"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#syntax-replicate-weights-2",
    "href": "talks/talk-rladies-ams-rtp.html#syntax-replicate-weights-2",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: replicate weights",
    "text": "Syntax: replicate weights\nFor studies with replicate weights, create the survey object using the as_survey_rep() function.\n\nas_survey_rep(\n  .data,\n  variables = NULL,\n  weights = NULL,\n  repweights = NULL,\n  type = c(\"BRR\", \"Fay\", \"JK1\", \"JKn\", \"bootstrap\", \n           \"successive-difference\", \"ACS\", \"other\"),\n  combined_weights = TRUE,\n  rho = NULL,\n  bootstrap_average = NULL,\n  scale = NULL,\n  rscales = NULL,\n  fpc = NULL,\n  fpctype = c(\"fraction\", \"correction\"),\n  mse = getOption(\"survey.replicates.mse\"),\n  degf = NULL,\n  ...\n)\n\n\n\nAlso has the repweights argument to indicate the variables that hold the replicate weights"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#syntax-replicate-weights-3",
    "href": "talks/talk-rladies-ams-rtp.html#syntax-replicate-weights-3",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: replicate weights",
    "text": "Syntax: replicate weights\nFor studies with replicate weights, create the survey object using the as_survey_rep() function.\n\nas_survey_rep(\n  .data,\n  variables = NULL,\n  weights = NULL,\n  repweights = NULL,\n  type = c(\"BRR\", \"Fay\", \"JK1\", \"JKn\", \"bootstrap\", \n           \"successive-difference\", \"ACS\", \"other\"),\n  combined_weights = TRUE,\n  rho = NULL,\n  bootstrap_average = NULL,\n  scale = NULL,\n  rscales = NULL,\n  fpc = NULL,\n  fpctype = c(\"fraction\", \"correction\"),\n  mse = getOption(\"survey.replicates.mse\"),\n  degf = NULL,\n  ...\n)\n\n\n\nNeed to include the type of replicate weights: Balanced Repeated Replicates (BRR), Fay, Jackknife (JK), etc."
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#syntax-replicate-weights-4",
    "href": "talks/talk-rladies-ams-rtp.html#syntax-replicate-weights-4",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: replicate weights",
    "text": "Syntax: replicate weights\nFor studies with replicate weights, create the survey object using the as_survey_rep() function.\n\nas_survey_rep(\n  .data,\n  variables = NULL,\n  weights = NULL,\n  repweights = NULL,\n  type = c(\"BRR\", \"Fay\", \"JK1\", \"JKn\", \"bootstrap\", \n           \"successive-difference\", \"ACS\", \"other\"),\n  combined_weights = TRUE,\n  rho = NULL,\n  bootstrap_average = NULL,\n  scale = NULL,\n  rscales = NULL,\n  fpc = NULL,\n  fpctype = c(\"fraction\", \"correction\"),\n  mse = getOption(\"survey.replicates.mse\"),\n  degf = NULL,\n  ...\n)\n\n\n\nHave separate arguments for the various parameters for the replicate weights: rho, scale, etc."
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation",
    "href": "talks/talk-rladies-ams-rtp.html#implementation",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\n\nrecs_des &lt;- recs_2020 %&gt;%\n  as_survey_rep(\n1    weights = NWEIGHT,\n2    repweights = NWEIGHT1:NWEIGHT60,\n    type = \"JK1\",\n    scale = 59 / 60,\n    mse = TRUE\n  )\n\n\n1\n\nMain analytic weight in NWEIGHT variable\n\n2\n\nJackknife weights in NWEIGHT1-NWEIGHT60 variables\n\n\n\n\n\n\nThe RECS data has jackknife replicate weights, so using the second function (as_survey_rep())\nUsing the documention for RECS, learn the variable names for the weights, the type, and the scale"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#results",
    "href": "talks/talk-rladies-ams-rtp.html#results",
    "title": "Tidy Data,Weighted Insights",
    "section": "Results",
    "text": "Results\n\nrecs_des\n\nCall: Called via srvyr\nUnstratified cluster jacknife (JK1) with 60 replicates and MSE variances.\nSampling variables:\n  - repweights: `NWEIGHT1 + NWEIGHT2 + NWEIGHT3 + NWEIGHT4 + NWEIGHT5 +\n    NWEIGHT6 + NWEIGHT7 + NWEIGHT8 + NWEIGHT9 + NWEIGHT10 + NWEIGHT11 +\n    NWEIGHT12 + NWEIGHT13 + NWEIGHT14 + NWEIGHT15 + NWEIGHT16 + NWEIGHT17 +\n    NWEIGHT18 + NWEIGHT19 + NWEIGHT20 + NWEIGHT21 + NWEIGHT22 + NWEIGHT23 +\n    NWEIGHT24 + NWEIGHT25 + NWEIGHT26 + NWEIGHT27 + NWEIGHT28 + NWEIGHT29 +\n    NWEIGHT30 + NWEIGHT31 + NWEIGHT32 + NWEIGHT33 + NWEIGHT34 + NWEIGHT35 +\n    NWEIGHT36 + NWEIGHT37 + NWEIGHT38 + NWEIGHT39 + NWEIGHT40 + NWEIGHT41 +\n    NWEIGHT42 + NWEIGHT43 + NWEIGHT44 + NWEIGHT45 + NWEIGHT46 + NWEIGHT47 +\n    NWEIGHT48 + NWEIGHT49 + NWEIGHT50 + NWEIGHT51 + NWEIGHT52 + NWEIGHT53 +\n    NWEIGHT54 + NWEIGHT55 + NWEIGHT56 + NWEIGHT57 + NWEIGHT58 + NWEIGHT59 +\n    NWEIGHT60` \n  - weights: NWEIGHT \nData variables: \n  - DOEID (dbl), ClimateRegion_BA (fct), Urbanicity (fct), Region (fct),\n    REGIONC (chr), Division (fct), STATE_FIPS (chr), state_postal (fct),\n    state_name (fct), HDD65 (dbl), CDD65 (dbl), HDD30YR (dbl), CDD30YR (dbl),\n    HousingUnitType (fct), YearMade (ord), TOTSQFT_EN (dbl), TOTHSQFT (dbl),\n    TOTCSQFT (dbl), SpaceHeatingUsed (lgl), ACUsed (lgl), HeatingBehavior\n    (fct), WinterTempDay (dbl), WinterTempAway (dbl), WinterTempNight (dbl),\n    ACBehavior (fct), SummerTempDay (dbl), SummerTempAway (dbl),\n    SummerTempNight (dbl), NWEIGHT (dbl), NWEIGHT1 (dbl), NWEIGHT2 (dbl),\n    NWEIGHT3 (dbl), NWEIGHT4 (dbl), NWEIGHT5 (dbl), NWEIGHT6 (dbl), NWEIGHT7\n    (dbl), NWEIGHT8 (dbl), NWEIGHT9 (dbl), NWEIGHT10 (dbl), NWEIGHT11 (dbl),\n    NWEIGHT12 (dbl), NWEIGHT13 (dbl), NWEIGHT14 (dbl), NWEIGHT15 (dbl),\n    NWEIGHT16 (dbl), NWEIGHT17 (dbl), NWEIGHT18 (dbl), NWEIGHT19 (dbl),\n    NWEIGHT20 (dbl), NWEIGHT21 (dbl), NWEIGHT22 (dbl), NWEIGHT23 (dbl),\n    NWEIGHT24 (dbl), NWEIGHT25 (dbl), NWEIGHT26 (dbl), NWEIGHT27 (dbl),\n    NWEIGHT28 (dbl), NWEIGHT29 (dbl), NWEIGHT30 (dbl), NWEIGHT31 (dbl),\n    NWEIGHT32 (dbl), NWEIGHT33 (dbl), NWEIGHT34 (dbl), NWEIGHT35 (dbl),\n    NWEIGHT36 (dbl), NWEIGHT37 (dbl), NWEIGHT38 (dbl), NWEIGHT39 (dbl),\n    NWEIGHT40 (dbl), NWEIGHT41 (dbl), NWEIGHT42 (dbl), NWEIGHT43 (dbl),\n    NWEIGHT44 (dbl), NWEIGHT45 (dbl), NWEIGHT46 (dbl), NWEIGHT47 (dbl),\n    NWEIGHT48 (dbl), NWEIGHT49 (dbl), NWEIGHT50 (dbl), NWEIGHT51 (dbl),\n    NWEIGHT52 (dbl), NWEIGHT53 (dbl), NWEIGHT54 (dbl), NWEIGHT55 (dbl),\n    NWEIGHT56 (dbl), NWEIGHT57 (dbl), NWEIGHT58 (dbl), NWEIGHT59 (dbl),\n    NWEIGHT60 (dbl), BTUEL (dbl), DOLLAREL (dbl), BTUNG (dbl), DOLLARNG (dbl),\n    BTULP (dbl), DOLLARLP (dbl), BTUFO (dbl), DOLLARFO (dbl), BTUWOOD (dbl),\n    TOTALBTU (dbl), TOTALDOL (dbl)"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#syntax",
    "href": "talks/talk-rladies-ams-rtp.html#syntax",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax",
    "text": "Syntax\nThe survey_mean() calculates means while taking into account the survey design elements.\nsurvey_mean(\n  x,\n  na.rm = FALSE,\n  vartype = c(\"se\", \"ci\", \"var\", \"cv\"),\n  level = 0.95,\n  proportion = FALSE,\n  prop_method = c(\"logit\", \"likelihood\", \"asin\", \"beta\", \"mean\"),\n  deff = FALSE,\n  df = NULL\n)"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-1",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nCalculate the estimated average cost of electricity (DOLLAREL) in the United States:\n\nrecs_des %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL, \n                                    vartype = c(\"se\", \"ci\")))"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-2",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-2",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nCalculate the estimated average cost of electricity (DOLLAREL) in the United States:\n\nrecs_des %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = c(\"se\", \"ci\")))\n\n\nUse the survey design object, not raw data"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-3",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-3",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nCalculate the estimated average cost of electricity (DOLLAREL) in the United States:\n\nrecs_des %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = c(\"se\", \"ci\")))\n\n\nUse the survey design object, not raw data\nCall survey_mean() within summarize() function"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-4",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-4",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nCalculate the estimated average cost of electricity (DOLLAREL) in the United States:\n\nrecs_des %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = c(\"se\", \"ci\")))\n\n\nUse the survey design object, not raw data\nCall survey_mean() within summarize() function\nSpecify the type of variance output, here we output the standard error and confidence interval"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#results-1",
    "href": "talks/talk-rladies-ams-rtp.html#results-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Results",
    "text": "Results\nCalculate the estimated average cost of electricity (DOLLAREL) in the United States:\n\nrecs_des %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = c(\"se\", \"ci\")))\n\n# A tibble: 1 × 4\n  elec_bill elec_bill_se elec_bill_low elec_bill_upp\n      &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;\n1     1380.         5.38         1369.         1391.\n\n\n\n\nEstimated average cost of electricity is in the first column\nStandard error is in the second column\nConfidence interval is in the third and fourth columns (lower bound, upper bound)\nThis is the standard R output, we will show later on how to make these into prettier tables"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#calculate-means-with-groups",
    "href": "talks/talk-rladies-ams-rtp.html#calculate-means-with-groups",
    "title": "Tidy Data,Weighted Insights",
    "section": "Calculate means with groups",
    "text": "Calculate means with groups\nCalculate the estimated average cost of electricity in the U.S. (DOLLAREL) by each region (Region) by including a group_by() function with the variable of interest before the summarize() function:\n\nrecs_des %&gt;%\n  group_by(Region) %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = c(\"se\", \"ci\")))"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#calculate-means-with-groups-1",
    "href": "talks/talk-rladies-ams-rtp.html#calculate-means-with-groups-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Calculate means with groups",
    "text": "Calculate means with groups\nCalculate the estimated average cost of electricity in the U.S. (DOLLAREL) by each region (Region) by including a group_by() function with the variable of interest before the summarize() function:\n\nrecs_des %&gt;%\n  group_by(Region) %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = c(\"se\", \"ci\")))\n\n\n\nWhen working with subgroups, need to subset (filter()) or define groups (group_by()) before calculating the estimates\nHere we are interested in cost of electrictiy for each of the U.S. Census Regions"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#calculate-means-with-groups-2",
    "href": "talks/talk-rladies-ams-rtp.html#calculate-means-with-groups-2",
    "title": "Tidy Data,Weighted Insights",
    "section": "Calculate means with groups",
    "text": "Calculate means with groups\nCalculate the estimated average cost of electricity in the U.S. (DOLLAREL) by each region (Region) by including a group_by() function with the variable of interest before the summarize() function:\n\nrecs_des %&gt;%\n  group_by(Region) %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = c(\"se\", \"ci\")))\n\n# A tibble: 4 × 5\n  Region    elec_bill elec_bill_se elec_bill_low elec_bill_upp\n  &lt;fct&gt;         &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;\n1 Northeast     1343.         14.6         1313.         1372.\n2 Midwest       1293.         11.7         1270.         1317.\n3 South         1548.         10.3         1527.         1568.\n4 West          1211.         12.0         1187.         1235.\n\n\n\n\nOutput has a row for each region"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#syntax-1",
    "href": "talks/talk-rladies-ams-rtp.html#syntax-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax",
    "text": "Syntax\nUse the svyttest() function to compare two proportions or means.\nSyntax:\nsvyttest(formula,\n         design,\n         ...)\n\n\nSimilar to t.test() function in base R with the formula and the data arguments"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-one-sample-t-test",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-one-sample-t-test",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: one-sample t-test",
    "text": "Implementation: one-sample t-test\nStephanie usually sets her home to 68°F at night during the summer. Is this different from the average household in the U.S.?"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-one-sample-t-test-1",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-one-sample-t-test-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: one-sample t-test",
    "text": "Implementation: one-sample t-test\nStephanie usually sets her home to 68°F at night during the summer. Is this different from the average household in the U.S.?\nFirst, look at the estimated average nighttime temperature U.S. households set their homes to during the summer (SummerTempNight).\n\nrecs_des %&gt;%\n  summarize(mu = survey_mean(SummerTempNight, na.rm = TRUE))\n\n# A tibble: 1 × 2\n     mu  mu_se\n  &lt;dbl&gt;  &lt;dbl&gt;\n1  71.4 0.0397\n\n\n\n\nNote if you don’t specify a variance type, the default is to output the standard error"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-one-sample-t-test-2",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-one-sample-t-test-2",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: one-sample t-test",
    "text": "Implementation: one-sample t-test\nTest if the average U.S. household sets its temperature at a value different from 68°F using svyttest():\n\nrecs_des %&gt;%\n  svyttest(\n    formula = SummerTempNight - 68 ~ 0, \n    design = ., \n    na.rm = TRUE\n  )"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-one-sample-t-test-3",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-one-sample-t-test-3",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: one-sample t-test",
    "text": "Implementation: one-sample t-test\nTest if the average U.S. household sets its temperature at a value different from 68°F using svyttest():\n\nrecs_des %&gt;%\n  svyttest(\n    formula = SummerTempNight - 68 ~ 0, \n    design = ., \n    na.rm = TRUE\n  )\n\n\nFormula to test if the true mean of SummerTempNight variable minus 68°F is equal to 0"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-one-sample-t-test-4",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-one-sample-t-test-4",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: one-sample t-test",
    "text": "Implementation: one-sample t-test\nTest if the average U.S. household sets its temperature at a value different from 68°F using svyttest():\n\nrecs_des %&gt;%\n  svyttest(\n    formula = SummerTempNight - 68 ~ 0, \n    design = ., \n    na.rm = TRUE\n  )\n\n\nFormula to test if the true mean of SummerTempNight variable minus 68°F is equal to 0\nDot notation . that passes the recs_des object into the design argument"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#results-one-sample-t-test",
    "href": "talks/talk-rladies-ams-rtp.html#results-one-sample-t-test",
    "title": "Tidy Data,Weighted Insights",
    "section": "Results: one-sample t-test",
    "text": "Results: one-sample t-test\nTest if the average U.S. household sets its temperature at a value different from 68°F using svyttest():\n\nrecs_des %&gt;%\n  svyttest(\n    formula = SummerTempNight - 68 ~ 0,\n    design = .,\n    na.rm = TRUE\n  )\n\n\n    Design-based one-sample t-test\n\ndata:  SummerTempNight - 68 ~ 0\nt = 84.788, df = 58, p-value &lt; 2.2e-16\nalternative hypothesis: true mean is not equal to 0\n95 percent confidence interval:\n 3.287816 3.446810\nsample estimates:\n    mean \n3.367313 \n\n\n\n\nSample estimate mean is the difference between the U.S. average and Stephanie’s house\nResult: Stephanie keeps her house cold in the summer!"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-two-sample-t-test",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-two-sample-t-test",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: two-sample t-test",
    "text": "Implementation: two-sample t-test\nOn average, is there a significant different electric bill for households with and without air-conditioning?"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-two-sample-t-test-1",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-two-sample-t-test-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: two-sample t-test",
    "text": "Implementation: two-sample t-test\nOn average, is there a significant different electric bill for households with and without air-conditioning?\nFirst, look at the estimated average for households with and without air-condition.\n\nrecs_des %&gt;%\n  group_by(ACUsed) %&gt;%\n  summarize(mean = survey_mean(DOLLAREL, na.rm = TRUE))\n\n# A tibble: 2 × 3\n  ACUsed  mean mean_se\n  &lt;lgl&gt;  &lt;dbl&gt;   &lt;dbl&gt;\n1 FALSE  1056.   16.0 \n2 TRUE   1422.    5.69\n\n\n\n\nAdd in the group_by here to see the means for each group"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-two-sample-t-test-2",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-two-sample-t-test-2",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: two-sample t-test",
    "text": "Implementation: two-sample t-test\nTest if the electricity expenditure is significantly different for homes with and without air-conditioning:\n\nrecs_des %&gt;%\n  svyttest(\n    formula = DOLLAREL ~ ACUsed,\n    design = ., \n    na.rm = TRUE\n  )"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-two-sample-t-test-3",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-two-sample-t-test-3",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: two-sample t-test",
    "text": "Implementation: two-sample t-test\nTest if the electricity expenditure is significantly different for homes with and without air-conditioning:\n\nrecs_des %&gt;%\n  svyttest(\n    formula = DOLLAREL ~ ACUsed,\n    design = ., \n    na.rm = TRUE\n  )\n\n\nFormula with electricity expenditure on the left and air-conditioning usage on the right"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#results-two-sample-t-test",
    "href": "talks/talk-rladies-ams-rtp.html#results-two-sample-t-test",
    "title": "Tidy Data,Weighted Insights",
    "section": "Results: two-sample t-test",
    "text": "Results: two-sample t-test\nTest if the electricity expenditure is significantly different for homes with and without air-conditioning:\n\nrecs_des %&gt;%\n  svyttest(\n    formula = DOLLAREL ~ ACUsed,\n    design = ., \n    na.rm = TRUE\n  )\n\n\n    Design-based t-test\n\ndata:  DOLLAREL ~ ACUsed\nt = 21.29, df = 58, p-value &lt; 2.2e-16\nalternative hypothesis: true difference in mean is not equal to 0\n95 percent confidence interval:\n 331.3343 400.1054\nsample estimates:\ndifference in mean \n          365.7199 \n\n\n\n\nHousehold with AC have higher electrical bill"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#syntax-2",
    "href": "talks/talk-rladies-ams-rtp.html#syntax-2",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax",
    "text": "Syntax\nWith the {gt} package, supply the input data table to gt() and add options to modify and format your table.\ndata %&gt;%\n  gt() %&gt;%\n  ... add options here..."
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-5",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-5",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nCreate a table for estimated average household electricity bill by region:\n\nrecs_tab &lt;- recs_des %&gt;%\n  group_by(Region) %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = \"ci\"))\n\nrecs_tab\n\n# A tibble: 4 × 4\n  Region    elec_bill elec_bill_low elec_bill_upp\n  &lt;fct&gt;         &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;\n1 Northeast     1343.         1313.         1372.\n2 Midwest       1293.         1270.         1317.\n3 South         1548.         1527.         1568.\n4 West          1211.         1187.         1235."
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-6",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-6",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nPipe (%&gt;%) your data frame (recs_tab) into the gt() function:\n\nrecs_tab %&gt;%\n  gt()\n\n\n\n\n\n\n\nCensus Region\nelec_bill\nelec_bill_low\nelec_bill_upp\n\n\n\n\nNortheast\n1342.647\n1313.386\n1371.907\n\n\nMidwest\n1293.233\n1269.827\n1316.639\n\n\nSouth\n1547.653\n1527.115\n1568.191\n\n\nWest\n1211.020\n1187.045\n1234.994"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-7",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-7",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nContinue adding to your table, for example, designating Region as a “stub”:\n\nrecs_tab %&gt;%\n  gt(rowname_col = \"Region\")\n\n\n\n\n\n\n\n\nelec_bill\nelec_bill_low\nelec_bill_upp\n\n\n\n\nNortheast\n1342.647\n1313.386\n1371.907\n\n\nMidwest\n1293.233\n1269.827\n1316.639\n\n\nSouth\n1547.653\n1527.115\n1568.191\n\n\nWest\n1211.020\n1187.045\n1234.994"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-8",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-8",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nAdd labels to columns:\n\nrecs_tab %&gt;%\n  gt(rowname_col = \"Region\") %&gt;%\n  cols_label(\n    elec_bill = \"Average\",\n    elec_bill_low = \"Lower\",\n    elec_bill_upp = \"Upper\"\n  )\n\n\n\n\n\n\n\n\nAverage\nLower\nUpper\n\n\n\n\nNortheast\n1342.647\n1313.386\n1371.907\n\n\nMidwest\n1293.233\n1269.827\n1316.639\n\n\nSouth\n1547.653\n1527.115\n1568.191\n\n\nWest\n1211.020\n1187.045\n1234.994"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-9",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-9",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nAdd a spanner to break up the labels:\n\nrecs_tab %&gt;%\n  gt(rowname_col = \"Region\") %&gt;%\n  cols_label(\n    elec_bill = \"Average\",\n    elec_bill_low = \"Lower\",\n    elec_bill_upp = \"Upper\"\n  ) %&gt;%\n  tab_spanner(\n    label = \"Cost of electricity in the U.S. by region\",\n    columns = c(elec_bill, elec_bill_low, elec_bill_upp))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCost of electricity in the U.S. by region\n\n\n\nAverage\nLower\nUpper\n\n\n\n\nNortheast\n1342.647\n1313.386\n1371.907\n\n\nMidwest\n1293.233\n1269.827\n1316.639\n\n\nSouth\n1547.653\n1527.115\n1568.191\n\n\nWest\n1211.020\n1187.045\n1234.994"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#implementation-10",
    "href": "talks/talk-rladies-ams-rtp.html#implementation-10",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nFormat numbers using the fmt_*() functions:\n\nrecs_tab %&gt;%\n  gt(rowname_col = \"Region\") %&gt;%\n  cols_label(\n    elec_bill = \"Average\",\n    elec_bill_low = \"Lower\",\n    elec_bill_upp = \"Upper\"\n  ) %&gt;%\n  tab_spanner(\n    label = \"Cost of electricity in the U.S. by region\",\n    columns = c(elec_bill, elec_bill_low, elec_bill_upp)) %&gt;%\n  fmt_currency()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCost of electricity in the U.S. by region\n\n\n\nAverage\nLower\nUpper\n\n\n\n\nNortheast\n$1,342.65\n$1,313.39\n$1,371.91\n\n\nMidwest\n$1,293.23\n$1,269.83\n$1,316.64\n\n\nSouth\n$1,547.65\n$1,527.12\n$1,568.19\n\n\nWest\n$1,211.02\n$1,187.05\n$1,234.99"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#references",
    "href": "talks/talk-rladies-ams-rtp.html#references",
    "title": "Tidy Data,Weighted Insights",
    "section": "References",
    "text": "References\n\nFreedman Ellis, Greg, and Ben Schneider. 2024. srvyr: ’dplyr’-Like Syntax for Summary Statistics of Survey Data. http://gdfe.co/srvyr/.\nLumley, Thomas. 2010. Complex Surveys: A Guide to Analysis Using R. John Wiley & Sons. https://r-survey.r-forge.r-project.org/survey/.\nZimmer, S. A., Powell, R. J., & Velásquez, I. C. (2024). Exploring Complex Survey Data Analysis Using R: A Tidy Introduction with {srvyr} and {survey}. Chapman & Hall: CRC Press. https://tidy-survey-r.github.io/tidy-survey-book/"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#where-to-find-our-book",
    "href": "talks/talk-rladies-ams-rtp.html#where-to-find-our-book",
    "title": "Tidy Data,Weighted Insights",
    "section": "Where to find our book",
    "text": "Where to find our book\nPrint copies:\n\nRoutledge\nYour local bookstore\nAmazon\n\nOnline version:\n\nhttps://tidy-survey-r.github.io/tidy-survey-book/"
  },
  {
    "objectID": "talks/talk-rladies-ams-rtp.html#q-a",
    "href": "talks/talk-rladies-ams-rtp.html#q-a",
    "title": "Tidy Data,Weighted Insights",
    "section": "Q & A",
    "text": "Q & A\n\n\n\n\n\nContact info will be shared in the chat"
  },
  {
    "objectID": "talks/Talks.html",
    "href": "talks/Talks.html",
    "title": "Talks",
    "section": "",
    "text": "R-Ladies Amsterdam & RTP: 2025-02-25\nNCHS DRM Show & Tell: 2025-01-28"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Exploring Complex Survey Data Analysis",
    "section": "",
    "text": "Surveys are powerful tools for gathering information, uncovering insights, and facilitating decision-making. However, to ensure the accurate interpretation of results, they require specific analysis methods. In this book, readers embark on an in-depth journey into conducting complex survey analysis with the {srvyr} package and tidyverse family of functions from the R programming language. Intended for intermediate R users familiar with the basics of the tidyverse, this book gives readers a deeper understanding of applying appropriate survey analysis techniques using {srvyr}, {survey}, and other related packages. With practical walkthroughs featuring real-world datasets, such as the American National Election Studies and Residential Energy Consumption Survey, readers will develop the skills necessary to perform impactful survey analysis on survey data collected through a randomized sample design. Additionally, this book teaches readers how to interpret and communicate results of survey data effectively.\nKey Features:\n\nUses the {srvyr} package and tidyverse family of packages.\nGrants a conceptual understanding of the statistical methods that the functions apply to.\nIncludes practical walkthroughs using publicly available survey data.\nProvides the reader with the tools for interpreting, visualizing, and presenting results.\n\n\n\n\n\n\n\n\nWhere to get the book\nPrint copies:\n\nRoutledge\nYour local bookstore\nAmazon\n\nOnline version:\n\nhttps://tidy-survey-r.github.io/tidy-survey-book/\n\n\n\nData package\nExamples throughout the book include usage of several datasets. Most of these datasets are included in the R package {srvyrexploR} available on GitHub.\n\n\nAuthors\nStephanie Zimmer, PhD, is a senior survey statistician with 10 years experience in survey sampling and design, survey weighting and analysis, and data management. She is an expert statistical programmer in R, SAS, and SUDAAN. She earned her PhD in Statistics from Iowa State University and her BS in Statistics from NC State. After earning the RStudio Tidyverse Trainer certification, she co-taught two courses on tidy survey analysis in R. She is currently a Senior Research Statistician at RTI International. Connect with her on LinkedIn or BlueSky.\nRebecca J. Powell, PhD, is the Director of Data Management and Survey Programming at Fors Marsh. Her research interests focus on visual design of questionnaires and contact materials. Dr. Powell is a Certified RStudio Tidyverse Trainer and has taught courses and webinars on data management in R and tidy survey analysis in R at both AAPOR and MAPOR. She has a PhD in Survey Research and Methodology from the University of Nebraska-Lincoln and a BS and MS in Applied Statistics from Rochester Institute of Technology. Connect with her on LinkedIn.\nIsabella Velásquez is a content strategist, data enthusiast, and author. Her experience spans data collection, grantmaking, strategy development, and survey instrument development. She earned her MSc in Analytics and BA in Economics and East Asian Languages and Civilizations from the University of Chicago. She currently works as a Sr. Product Marketing Manager at Posit Software, PBC. Follow her blog or connect with her on LinkedIn or BlueSky."
  },
  {
    "objectID": "short-courses.html",
    "href": "short-courses.html",
    "title": "Short courses",
    "section": "",
    "text": "Complex Survey Data Analysis: A Tidy Introduction with {srvyr} and {survey} - a half-day tutorial at 2025 useR conference\nTidy Survey Analysis in R: Workshop Series - an online short course taught in 3 sessions of 1.5 hours each for the 2022 Midwest Association for Public Opinion Research (MAPOR) Spring Webinar Series\nTidy Survey Analysis in R using the srvyr Package - a one-day online short course at the 2021 American Association for Public Opinion Research virtual conference"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#about-us",
    "href": "talks/talk-nchs-show-tell.html#about-us",
    "title": "Tidy Data,Weighted Insights",
    "section": "About us",
    "text": "About us\n\n\n Stephanie Zimmer\nRTI International\n\n Rebecca Powell\nFors Marsh\n\n Isabella Velásquez\nPosit"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#motivation",
    "href": "talks/talk-nchs-show-tell.html#motivation",
    "title": "Tidy Data,Weighted Insights",
    "section": "Motivation",
    "text": "Motivation\n\nWe are R users who work with survey data regularly\nShare knowledge with\n\nR users who are inaccurately analyzing survey data\nSAS/SUDAAN/Stata users who may not know about the capabilities of R\n\n{srvyr} package developed using tidyverse style syntax\nStephanie and Rebecca conducted a virtual short course at AAPOR conference in 2021\nConnected with Isabella to turn the short course into a book\n\n\n\n{survey} original survey analysis package – book by Thomas Lumley\n{srvyr} builds off the {survey} package, but uses easier to understand tidyverse syntax style"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#whats-in-the-book",
    "href": "talks/talk-nchs-show-tell.html#whats-in-the-book",
    "title": "Tidy Data,Weighted Insights",
    "section": "What’s in the book",
    "text": "What’s in the book\n\nHigh level overview of survey process\nComparison of syntax between {dplyr} and {srvyr}\nHow to read survey documentation\nDescriptive analysis, statistical testing, and modeling\nPublication ready tables and figures accounting for error\nCreating the survey design object\nAnalysis examples using real world data\n\n\n\nAssume that weights are already on the dataset\nDoes not include how to create weights"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#r-sas-sudaan-capabilities",
    "href": "talks/talk-nchs-show-tell.html#r-sas-sudaan-capabilities",
    "title": "Tidy Data,Weighted Insights",
    "section": "R, SAS, & SUDAAN capabilities",
    "text": "R, SAS, & SUDAAN capabilities\n\n\n\n\n\n\n\n\nFeature\nR {survey} package\nSAS survey procs\nSUDAAN procs\n\n\n\n\nDescriptive (out of the box)\nmean, total, proportion, percentage, quantile, ratio, variance, correlation\nmean, total, proportion, percentage, geometric mean, quantile, ratio, variance\nmean, total, proportion, percentage, geometric mean, quantile, ratio, variance, correlation\n\n\nCustom descriptive functions\nYes, but must use delta method\nNo method in docs\nYes, through vargen proc\n\n\nTesting\nmeans, proportions, quantiles, assocation, GOF\nmeans, proportions, assocation, GOF\nmeans, proportions, assocation, GOF\n\n\nDesign effects\nNot for quantiles, variances, or correlations\nOnly for proportions\nAll ests\n\n\nImputation\nNone\nHot-deck, approximate Bayesian bootstrap, fully efficient fractional, two-stage fully efficient fractional, fractional hot-deck\nWeighted sequential hot deck, cell mean, regression-based (linear and logistic)\n\n\nWeighting\nPost-stratification in estimation, calibration (linear, raking, logit)\nPost-stratification in estimation\nPost-stratification in estimation, calibration: nonresponse and post-stratification (WTADJUST), Using variables only known for respondents in models (WTADJX)\n\n\nModeling\nLinear, Logistic, Cox proportional hazards, Kaplan-Meier, Multinomial, Poisson, Log-linear\nLinear, Logistic, Cox proportional hazards\nLinear, Logistic, Cox proportional hazards, Kaplan-Meier, Multinomial, Poisson-like count\n\n\n\n\n\n\n\n\n\nR comparison only includes survey and srvyr packages, not other R packages\nBold entries in rows with bold indicate differences since there are some long lists\nR and SUDAAN allow for more customization than SAS but harder in R (need calculus to do delta method)\nR is only software doing testing of quantiles - some papers on how to do in others but requires custom macros\nSAS doesn’t broadly do design effects but there are some macros out there. We won’t go into details but more types of design effects in SUDAAN than R\nImputation is done in other R packages\nWeighting: all allow post-stratification while doing analysis, common in health research. Other packages in R do more than survey package\nSAS does sample selection"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#r-packages-for-survey-analysis",
    "href": "talks/talk-nchs-show-tell.html#r-packages-for-survey-analysis",
    "title": "Tidy Data,Weighted Insights",
    "section": "R packages for survey analysis",
    "text": "R packages for survey analysis\n\n{survey} package first on CRAN in 2003\n\ndescriptive analysis\nstatistical testing\nmodeling\nweighting\n\n{srvyr} package first on CRAN in 2016\n\n“wrapper” for {survey} with {tidyverse}-style syntax\nonly descriptive analysis\n\n{gtsummary} package first on CRAN in 2016\n\ncreates publication-ready tables from survey data\ncurrently cannot handle replicate weights\n\n\n\n\nR packages are a collection of functions\nThis is not an exhaustive list of packages that work with survey data\nSeveral packages for imputation, more complex weighting, and more\ngtsummary won’t be discussed today"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#comparison-with-dplyr",
    "href": "talks/talk-nchs-show-tell.html#comparison-with-dplyr",
    "title": "Tidy Data,Weighted Insights",
    "section": "Comparison with dplyr",
    "text": "Comparison with dplyr\n\ndplyr: summary functions called within summarize()\n\ndplyr\n\ntowny %&gt;%\n  group_by(status) %&gt;%\n  summarize(\n    area_mean = mean(land_area_km2),\n    area_median = median(land_area_km2)\n  )\n\n# A tibble: 2 × 3\n  status      area_mean area_median\n  &lt;chr&gt;           &lt;dbl&gt;       &lt;dbl&gt;\n1 lower-tier       362.        310.\n2 single-tier      388.        194."
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#comparison-with-dplyr-1",
    "href": "talks/talk-nchs-show-tell.html#comparison-with-dplyr-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Comparison with dplyr",
    "text": "Comparison with dplyr\n\nsrvyr: survey_*() functions called with summarize()\n\nsrvyr\n\napistrat_des %&gt;%\n  group_by(stype) %&gt;%\n  summarize(\n    api00_mean = survey_mean(api00),\n    api00_med = survey_median(api00)\n  )\n\n# A tibble: 3 × 5\n  stype api00_mean api00_mean_se api00_med api00_med_se\n  &lt;fct&gt;      &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;\n1 E           674.          12.5       671         20.7\n2 H           626.          15.5       635         21.6\n3 M           637.          16.6       648         24.1\n\n\n\n\nIf you already use {tidyverse}/{dplyr}, the syntax {srvyr} will come easily\nFunctions commonly used like group_by, filter, and summarize also used in srvyr\nNote that the survey estimates also generate standard deviations - can also add options to get CIs, deffs, and variances"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#steps-for-descriptive-analysis",
    "href": "talks/talk-nchs-show-tell.html#steps-for-descriptive-analysis",
    "title": "Tidy Data,Weighted Insights",
    "section": "Steps for descriptive analysis",
    "text": "Steps for descriptive analysis\n\nCreate a tbl_svy object (a survey object) using: as_survey_design() or as_survey_rep()\nSubset data (if needed) using filter() (to create subpopulations)\nSpecify domains of analysis using group_by()\nWithin summarize(), specify variables to calculate, including means, totals, proportions, quantiles, and more\n\n\n\nSurvey object involves specifying weights, strata and/or clusters (PSUs) OR replicate weights\nSurvey object can be used over and over for the same data and different analyses\nThis is necessary for getting appropriate weighted estimates and standard errors. More public use files are providing this syntax\nCan also use cascade() instead of summarize() to get the total row"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#steps-for-testing",
    "href": "talks/talk-nchs-show-tell.html#steps-for-testing",
    "title": "Tidy Data,Weighted Insights",
    "section": "Steps for testing",
    "text": "Steps for testing\n\nCreate a tbl_svy object (a survey object) using: as_survey_design() or as_survey_rep()\nSubset data (if needed) using filter() (to create subpopulations)\nUse svyttest() for comparisons of proportions and means, svygofchisq() for GOF test, or svychisq() for test of independence and test of homogeneity\n\n\n\nOnly last step changes from descriptive analysis."
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#steps-for-modeling",
    "href": "talks/talk-nchs-show-tell.html#steps-for-modeling",
    "title": "Tidy Data,Weighted Insights",
    "section": "Steps for modeling",
    "text": "Steps for modeling\n\nCreate a tbl_svy object (a survey object) using: as_survey_design() or as_survey_rep()\nSubset data (if needed) using filter() (to create subpopulations)\nUse svyglm() for linear models and logistic models, svycoxph() for Cox proportional-hazards, svykm() for Kaplan-Meier, svyloglin() for log-linear models, svyolr() for multinomial\n\n\n\nOnly last step changes from descriptive analysis. Syntax mirrors glm, coxph, etc functions for non-survey data"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#load-packages-and-data-1",
    "href": "talks/talk-nchs-show-tell.html#load-packages-and-data-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Load packages and data",
    "text": "Load packages and data\n\n# install.packages(c(\"survey\", \"srvyr\", \"gt\"))\n# pak::pak(\"tidy-survey-r/srvyrexploR\")\nlibrary(survey)\nlibrary(srvyr)\nlibrary(gt)\nlibrary(srvyrexploR)\n\nsummary(recs_2020)\n\n     DOEID           ClimateRegion_BA         Urbanicity          Region    \n Min.   :100001   Cold       :7116    Urban Area   :12395   Northeast:3657  \n 1st Qu.:104625   Mixed-Humid:5579    Urban Cluster: 2020   Midwest  :3832  \n Median :109248   Hot-Humid  :2545    Rural        : 4081   South    :6426  \n Mean   :109248   Hot-Dry    :1577                          West     :4581  \n 3rd Qu.:113872   Marine     : 911                                          \n Max.   :118496   Very-Cold  : 572                                          \n                  (Other)    : 196                                          \n   REGIONC                        Division     STATE_FIPS       \n Length:18496       South Atlantic    :3256   Length:18496      \n Class :character   Pacific           :2497   Class :character  \n Mode  :character   East North Central:2014   Mode  :character  \n                    Middle Atlantic   :1977                     \n                    West South Central:1827                     \n                    West North Central:1818                     \n                    (Other)           :5107                     \n  state_postal           state_name        HDD65           CDD65     \n CA     : 1152   California   : 1152   Min.   :    0   Min.   :   0  \n TX     : 1016   Texas        : 1016   1st Qu.: 2434   1st Qu.: 814  \n NY     :  904   New York     :  904   Median : 4396   Median :1179  \n FL     :  655   Florida      :  655   Mean   : 4272   Mean   :1526  \n PA     :  617   Pennsylvania :  617   3rd Qu.: 5810   3rd Qu.:1805  \n MA     :  552   Massachusetts:  552   Max.   :17383   Max.   :5534  \n (Other):13600   (Other)      :13600                                 \n    HDD30YR         CDD30YR                       HousingUnitType \n Min.   :    0   Min.   :   0   Mobile home               :  974  \n 1st Qu.: 2898   1st Qu.: 601   Single-family detached    :12319  \n Median : 4825   Median :1020   Single-family attached    : 1751  \n Mean   : 4679   Mean   :1310   Apartment: 2-4 Units      : 1013  \n 3rd Qu.: 6290   3rd Qu.:1703   Apartment: 5 or more units: 2439  \n Max.   :16071   Max.   :4905                                     \n                                                                  \n        YearMade      TOTSQFT_EN       TOTHSQFT        TOTCSQFT    \n 1970-1979  :2817   Min.   :  200   Min.   :    0   Min.   :    0  \n 2000-2009  :2748   1st Qu.: 1100   1st Qu.: 1000   1st Qu.:  460  \n Before 1950:2721   Median : 1700   Median : 1520   Median : 1200  \n 1990-1999  :2451   Mean   : 1960   Mean   : 1744   Mean   : 1394  \n 1980-1989  :2435   3rd Qu.: 2510   3rd Qu.: 2300   3rd Qu.: 2000  \n 1960-1969  :1867   Max.   :15000   Max.   :15000   Max.   :14600  \n (Other)    :3457                                                  \n SpaceHeatingUsed   ACUsed       \n Mode :logical    Mode :logical  \n FALSE:751        FALSE:2325     \n TRUE :17745      TRUE :16171    \n                                 \n                                 \n                                 \n                                 \n                                                               HeatingBehavior\n Set one temp and leave it                                             :7806  \n Manually adjust at night/no one home                                  :4654  \n Programmable or smart thermostat automatically adjusts the temperature:3310  \n Turn on or off as needed                                              :1491  \n No control                                                            : 438  \n Other                                                                 :  46  \n NA's                                                                  : 751  \n WinterTempDay   WinterTempAway  WinterTempNight\n Min.   :50.00   Min.   :50.00   Min.   :50.00  \n 1st Qu.:68.00   1st Qu.:65.00   1st Qu.:65.00  \n Median :70.00   Median :68.00   Median :68.00  \n Mean   :69.77   Mean   :67.45   Mean   :68.01  \n 3rd Qu.:72.00   3rd Qu.:70.00   3rd Qu.:70.00  \n Max.   :90.00   Max.   :90.00   Max.   :90.00  \n NA's   :751     NA's   :751     NA's   :751    \n                                                                  ACBehavior  \n Set one temp and leave it                                             :6738  \n Manually adjust at night/no one home                                  :3637  \n Programmable or smart thermostat automatically adjusts the temperature:2638  \n Turn on or off as needed                                              :2746  \n No control                                                            : 409  \n Other                                                                 :   3  \n NA's                                                                  :2325  \n SummerTempDay   SummerTempAway  SummerTempNight    NWEIGHT       \n Min.   :50.00   Min.   :50.00   Min.   :50.00   Min.   :  437.9  \n 1st Qu.:70.00   1st Qu.:70.00   1st Qu.:68.00   1st Qu.: 4018.7  \n Median :72.00   Median :74.00   Median :72.00   Median : 6119.4  \n Mean   :72.01   Mean   :73.45   Mean   :71.22   Mean   : 6678.7  \n 3rd Qu.:75.00   3rd Qu.:78.00   3rd Qu.:74.00   3rd Qu.: 8890.0  \n Max.   :90.00   Max.   :90.00   Max.   :90.00   Max.   :29279.1  \n NA's   :2325    NA's   :2325    NA's   :2325                     \n    NWEIGHT1        NWEIGHT2        NWEIGHT3        NWEIGHT4    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3950   1st Qu.: 3951   1st Qu.: 3954   1st Qu.: 3953  \n Median : 6136   Median : 6151   Median : 6151   Median : 6153  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8976   3rd Qu.: 8979   3rd Qu.: 8994   3rd Qu.: 8998  \n Max.   :30015   Max.   :29422   Max.   :29431   Max.   :29494  \n                                                                \n    NWEIGHT5        NWEIGHT6        NWEIGHT7        NWEIGHT8    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3957   1st Qu.: 3966   1st Qu.: 3944   1st Qu.: 3956  \n Median : 6134   Median : 6147   Median : 6135   Median : 6151  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8987   3rd Qu.: 8984   3rd Qu.: 8998   3rd Qu.: 8988  \n Max.   :30039   Max.   :29419   Max.   :29586   Max.   :29499  \n                                                                \n    NWEIGHT9       NWEIGHT10       NWEIGHT11       NWEIGHT12    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3947   1st Qu.: 3961   1st Qu.: 3950   1st Qu.: 3947  \n Median : 6139   Median : 6163   Median : 6140   Median : 6160  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8974   3rd Qu.: 8994   3rd Qu.: 8991   3rd Qu.: 8988  \n Max.   :29845   Max.   :29635   Max.   :29681   Max.   :29849  \n                                                                \n   NWEIGHT13       NWEIGHT14       NWEIGHT15       NWEIGHT16    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3967   1st Qu.: 3962   1st Qu.: 3958   1st Qu.: 3958  \n Median : 6142   Median : 6154   Median : 6145   Median : 6133  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8977   3rd Qu.: 8981   3rd Qu.: 8997   3rd Qu.: 8979  \n Max.   :29843   Max.   :30184   Max.   :29970   Max.   :29825  \n                                                                \n   NWEIGHT17       NWEIGHT18       NWEIGHT19       NWEIGHT20    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3958   1st Qu.: 3937   1st Qu.: 3947   1st Qu.: 3943  \n Median : 6126   Median : 6155   Median : 6153   Median : 6139  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8977   3rd Qu.: 8993   3rd Qu.: 8979   3rd Qu.: 8992  \n Max.   :30606   Max.   :29689   Max.   :29336   Max.   :30274  \n                                                                \n   NWEIGHT21       NWEIGHT22       NWEIGHT23       NWEIGHT24    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3960   1st Qu.: 3964   1st Qu.: 3943   1st Qu.: 3946  \n Median : 6135   Median : 6149   Median : 6148   Median : 6136  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8956   3rd Qu.: 8988   3rd Qu.: 8980   3rd Qu.: 8978  \n Max.   :29766   Max.   :29791   Max.   :30126   Max.   :29946  \n                                                                \n   NWEIGHT25       NWEIGHT26       NWEIGHT27       NWEIGHT28    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3952   1st Qu.: 3966   1st Qu.: 3942   1st Qu.: 3956  \n Median : 6150   Median : 6136   Median : 6125   Median : 6149  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8972   3rd Qu.: 8980   3rd Qu.: 8996   3rd Qu.: 8989  \n Max.   :30445   Max.   :29893   Max.   :30030   Max.   :29599  \n                                                                \n   NWEIGHT29       NWEIGHT30       NWEIGHT31       NWEIGHT32    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3970   1st Qu.: 3956   1st Qu.: 3944   1st Qu.: 3954  \n Median : 6146   Median : 6149   Median : 6144   Median : 6159  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8979   3rd Qu.: 8991   3rd Qu.: 8994   3rd Qu.: 8982  \n Max.   :30136   Max.   :29895   Max.   :29604   Max.   :29310  \n                                                                \n   NWEIGHT33       NWEIGHT34       NWEIGHT35       NWEIGHT36    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3964   1st Qu.: 3950   1st Qu.: 3967   1st Qu.: 3948  \n Median : 6148   Median : 6139   Median : 6141   Median : 6149  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8993   3rd Qu.: 8985   3rd Qu.: 8990   3rd Qu.: 8979  \n Max.   :29408   Max.   :29564   Max.   :30437   Max.   :27896  \n                                                                \n   NWEIGHT37       NWEIGHT38       NWEIGHT39       NWEIGHT40    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3955   1st Qu.: 3954   1st Qu.: 3940   1st Qu.: 3959  \n Median : 6133   Median : 6139   Median : 6147   Median : 6144  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8975   3rd Qu.: 8974   3rd Qu.: 8991   3rd Qu.: 8980  \n Max.   :30596   Max.   :30130   Max.   :29262   Max.   :30344  \n                                                                \n   NWEIGHT41       NWEIGHT42       NWEIGHT43       NWEIGHT44    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3975   1st Qu.: 3949   1st Qu.: 3947   1st Qu.: 3956  \n Median : 6153   Median : 6137   Median : 6157   Median : 6148  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8982   3rd Qu.: 8988   3rd Qu.: 9005   3rd Qu.: 8986  \n Max.   :29594   Max.   :29938   Max.   :29878   Max.   :29896  \n                                                                \n   NWEIGHT45       NWEIGHT46       NWEIGHT47       NWEIGHT48    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3952   1st Qu.: 3966   1st Qu.: 3938   1st Qu.: 3953  \n Median : 6149   Median : 6152   Median : 6150   Median : 6139  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8992   3rd Qu.: 8959   3rd Qu.: 8991   3rd Qu.: 8991  \n Max.   :29729   Max.   :29103   Max.   :30070   Max.   :29343  \n                                                                \n   NWEIGHT49       NWEIGHT50       NWEIGHT51       NWEIGHT52    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3947   1st Qu.: 3948   1st Qu.: 3958   1st Qu.: 3938  \n Median : 6146   Median : 6159   Median : 6150   Median : 6154  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8990   3rd Qu.: 8995   3rd Qu.: 8992   3rd Qu.: 9012  \n Max.   :29590   Max.   :30027   Max.   :29247   Max.   :29445  \n                                                                \n   NWEIGHT53       NWEIGHT54       NWEIGHT55       NWEIGHT56    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3959   1st Qu.: 3954   1st Qu.: 3945   1st Qu.: 3957  \n Median : 6156   Median : 6151   Median : 6143   Median : 6153  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 8979   3rd Qu.: 8973   3rd Qu.: 8977   3rd Qu.: 8995  \n Max.   :30131   Max.   :29439   Max.   :29216   Max.   :29203  \n                                                                \n   NWEIGHT57       NWEIGHT58       NWEIGHT59       NWEIGHT60    \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :    0  \n 1st Qu.: 3942   1st Qu.: 3962   1st Qu.: 3965   1st Qu.: 3953  \n Median : 6138   Median : 6137   Median : 6144   Median : 6140  \n Mean   : 6679   Mean   : 6679   Mean   : 6679   Mean   : 6679  \n 3rd Qu.: 9004   3rd Qu.: 8986   3rd Qu.: 8977   3rd Qu.: 8983  \n Max.   :29819   Max.   :29818   Max.   :29606   Max.   :29818  \n                                                                \n     BTUEL             DOLLAREL           BTUNG            DOLLARNG     \n Min.   :   143.3   Min.   : -889.5   Min.   :      0   Min.   :   0.0  \n 1st Qu.: 20205.8   1st Qu.:  836.5   1st Qu.:      0   1st Qu.:   0.0  \n Median : 31890.0   Median : 1257.9   Median :  22012   Median : 313.9  \n Mean   : 37016.2   Mean   : 1424.8   Mean   :  36960   Mean   : 396.0  \n 3rd Qu.: 48298.0   3rd Qu.: 1819.0   3rd Qu.:  62714   3rd Qu.: 644.9  \n Max.   :628155.5   Max.   :15680.2   Max.   :1134709   Max.   :8155.0  \n                                                                        \n     BTULP           DOLLARLP           BTUFO           DOLLARFO      \n Min.   :     0   Min.   :   0.00   Min.   :     0   Min.   :   0.00  \n 1st Qu.:     0   1st Qu.:   0.00   1st Qu.:     0   1st Qu.:   0.00  \n Median :     0   Median :   0.00   Median :     0   Median :   0.00  \n Mean   :  3917   Mean   :  80.89   Mean   :  5109   Mean   :  88.43  \n 3rd Qu.:     0   3rd Qu.:   0.00   3rd Qu.:     0   3rd Qu.:   0.00  \n Max.   :364215   Max.   :6621.44   Max.   :426268   Max.   :7003.69  \n                                                                      \n    BTUWOOD          TOTALBTU          TOTALDOL      \n Min.   :     0   Min.   :   1182   Min.   : -150.5  \n 1st Qu.:     0   1st Qu.:  45565   1st Qu.: 1258.3  \n Median :     0   Median :  74180   Median : 1793.2  \n Mean   :  3596   Mean   :  83002   Mean   : 1990.2  \n 3rd Qu.:     0   3rd Qu.: 108535   3rd Qu.: 2472.0  \n Max.   :500000   Max.   :1367548   Max.   :20043.4"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#syntax-common-sampling-designs",
    "href": "talks/talk-nchs-show-tell.html#syntax-common-sampling-designs",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: common sampling designs",
    "text": "Syntax: common sampling designs\nThe as_survey_design() function is used for most common sampling designs, such as stratified or clustered designs.\nas_survey_design(\n  .data,\n  ids = NULL,\n  probs = NULL,\n  strata = NULL,\n  variables = NULL,\n  fpc = NULL,\n  nest = FALSE,\n  check_strata = !nest,\n  weights = NULL,\n  pps = FALSE,\n  variance = c(\"HT\", \"YG\"),\n  ...\n)"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#syntax-common-sampling-designs-1",
    "href": "talks/talk-nchs-show-tell.html#syntax-common-sampling-designs-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: common sampling designs",
    "text": "Syntax: common sampling designs\nThe as_survey_design() function is used for most common sampling designs, such as stratified or clustered designs.\n\nas_survey_design(\n  .data,\n  ids = NULL,\n  probs = NULL,\n  strata = NULL,\n  variables = NULL,\n  fpc = NULL,\n  nest = FALSE,\n  check_strata = !nest,\n  weights = NULL,\n  pps = FALSE,\n  variance = c(\"HT\", \"YG\"),\n  ...\n)\n\n\n\nFor a stratified sample, use the strata argument to specify the variable with the strata information"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#syntax-common-sampling-designs-2",
    "href": "talks/talk-nchs-show-tell.html#syntax-common-sampling-designs-2",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: common sampling designs",
    "text": "Syntax: common sampling designs\nThe as_survey_design() function is used for most common sampling designs, such as stratified or clustered designs.\n\nas_survey_design(\n  .data,\n  ids = NULL,\n  probs = NULL,\n  strata = NULL,\n  variables = NULL,\n  fpc = NULL,\n  nest = FALSE,\n  check_strata = !nest,\n  weights = NULL,\n  pps = FALSE,\n  variance = c(\"HT\", \"YG\"),\n  ...\n)\n\n\n\nFor a clustered sample, use the ids argument to specify the variable(s) for Primary Sampling Units (PSUs) and Secondary Sampling Units (SSUs)"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#syntax-common-sampling-designs-3",
    "href": "talks/talk-nchs-show-tell.html#syntax-common-sampling-designs-3",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: common sampling designs",
    "text": "Syntax: common sampling designs\nThe as_survey_design() function is used for most common sampling designs, such as stratified or clustered designs.\n\nas_survey_design(\n  .data,\n  ids = NULL,\n  probs = NULL,\n  strata = NULL,\n  variables = NULL,\n  fpc = NULL,\n  nest = FALSE,\n  check_strata = !nest,\n  weights = NULL,\n  pps = FALSE,\n  variance = c(\"HT\", \"YG\"),\n  ...\n)\n\n\n\nCan also specify the fpc variable and if cluster IDs are nested within strata"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#syntax-common-sampling-designs-4",
    "href": "talks/talk-nchs-show-tell.html#syntax-common-sampling-designs-4",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: common sampling designs",
    "text": "Syntax: common sampling designs\nThe as_survey_design() function is used for most common sampling designs, such as stratified or clustered designs.\n\nas_survey_design(\n  .data,\n  ids = NULL,\n  probs = NULL,\n  strata = NULL,\n  variables = NULL,\n  fpc = NULL,\n  nest = FALSE,\n  check_strata = !nest,\n  weights = NULL,\n  pps = FALSE,\n  variance = c(\"HT\", \"YG\"),\n  ...\n)\n\n\n\nThe weights argument is for the main analytic weight that should be used"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#syntax-replicate-weights",
    "href": "talks/talk-nchs-show-tell.html#syntax-replicate-weights",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: replicate weights",
    "text": "Syntax: replicate weights\nFor studies with replicate weights, create the survey object using the as_survey_rep() function.\nas_survey_rep(\n  .data,\n  variables = NULL,\n  weights = NULL,\n  repweights = NULL,\n  type = c(\"BRR\", \"Fay\", \"JK1\", \"JKn\", \"bootstrap\", \n           \"successive-difference\", \"ACS\", \"other\"),\n  combined_weights = TRUE,\n  rho = NULL,\n  bootstrap_average = NULL,\n  scale = NULL,\n  rscales = NULL,\n  fpc = NULL,\n  fpctype = c(\"fraction\", \"correction\"),\n  mse = getOption(\"survey.replicates.mse\"),\n  degf = NULL,\n  ...\n)"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#syntax-replicate-weights-1",
    "href": "talks/talk-nchs-show-tell.html#syntax-replicate-weights-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: replicate weights",
    "text": "Syntax: replicate weights\nFor studies with replicate weights, create the survey object using the as_survey_rep() function.\n\nas_survey_rep(\n  .data,\n  variables = NULL,\n  weights = NULL,\n  repweights = NULL,\n  type = c(\"BRR\", \"Fay\", \"JK1\", \"JKn\", \"bootstrap\", \n           \"successive-difference\", \"ACS\",\"other\"),\n  combined_weights = TRUE,\n  rho = NULL,\n  bootstrap_average = NULL,\n  scale = NULL,\n  rscales = NULL,\n  fpc = NULL,\n  fpctype = c(\"fraction\", \"correction\"),\n  mse = getOption(\"survey.replicates.mse\"),\n  degf = NULL,\n  ...\n)\n\n\n\nAs with the first function, there is a weights argument for the main analytic weight"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#syntax-replicate-weights-2",
    "href": "talks/talk-nchs-show-tell.html#syntax-replicate-weights-2",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: replicate weights",
    "text": "Syntax: replicate weights\nFor studies with replicate weights, create the survey object using the as_survey_rep() function.\n\nas_survey_rep(\n  .data,\n  variables = NULL,\n  weights = NULL,\n  repweights = NULL,\n  type = c(\"BRR\", \"Fay\", \"JK1\", \"JKn\", \"bootstrap\", \n           \"successive-difference\", \"ACS\", \"other\"),\n  combined_weights = TRUE,\n  rho = NULL,\n  bootstrap_average = NULL,\n  scale = NULL,\n  rscales = NULL,\n  fpc = NULL,\n  fpctype = c(\"fraction\", \"correction\"),\n  mse = getOption(\"survey.replicates.mse\"),\n  degf = NULL,\n  ...\n)\n\n\n\nAlso has the repweights argument to indicate the variables that hold the replicate weights"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#syntax-replicate-weights-3",
    "href": "talks/talk-nchs-show-tell.html#syntax-replicate-weights-3",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: replicate weights",
    "text": "Syntax: replicate weights\nFor studies with replicate weights, create the survey object using the as_survey_rep() function.\n\nas_survey_rep(\n  .data,\n  variables = NULL,\n  weights = NULL,\n  repweights = NULL,\n  type = c(\"BRR\", \"Fay\", \"JK1\", \"JKn\", \"bootstrap\", \n           \"successive-difference\", \"ACS\", \"other\"),\n  combined_weights = TRUE,\n  rho = NULL,\n  bootstrap_average = NULL,\n  scale = NULL,\n  rscales = NULL,\n  fpc = NULL,\n  fpctype = c(\"fraction\", \"correction\"),\n  mse = getOption(\"survey.replicates.mse\"),\n  degf = NULL,\n  ...\n)\n\n\n\nNeed to include the type of replicate weights: Balanced Repeated Replicates (BRR), Fay, Jackknife (JK), etc."
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#syntax-replicate-weights-4",
    "href": "talks/talk-nchs-show-tell.html#syntax-replicate-weights-4",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax: replicate weights",
    "text": "Syntax: replicate weights\nFor studies with replicate weights, create the survey object using the as_survey_rep() function.\n\nas_survey_rep(\n  .data,\n  variables = NULL,\n  weights = NULL,\n  repweights = NULL,\n  type = c(\"BRR\", \"Fay\", \"JK1\", \"JKn\", \"bootstrap\", \n           \"successive-difference\", \"ACS\", \"other\"),\n  combined_weights = TRUE,\n  rho = NULL,\n  bootstrap_average = NULL,\n  scale = NULL,\n  rscales = NULL,\n  fpc = NULL,\n  fpctype = c(\"fraction\", \"correction\"),\n  mse = getOption(\"survey.replicates.mse\"),\n  degf = NULL,\n  ...\n)\n\n\n\nHave separate arguments for the various parameters for the replicate weights: rho, scale, etc."
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation",
    "href": "talks/talk-nchs-show-tell.html#implementation",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\n\nrecs_des &lt;- recs_2020 %&gt;%\n  as_survey_rep(\n1    weights = NWEIGHT,\n2    repweights = NWEIGHT1:NWEIGHT60,\n    type = \"JK1\",\n    scale = 59 / 60,\n    mse = TRUE\n  )\n\n\n1\n\nMain analytic weight in NWEIGHT variable\n\n2\n\nJackknife weights in NWEIGHT1-NWEIGHT60 variables\n\n\n\n\n\n\nThe RECS data has jackknife replicate weights, so using the second function (as_survey_rep())\nUsing the documention for RECS, learn the variable names for the weights, the type, and the scale"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#results",
    "href": "talks/talk-nchs-show-tell.html#results",
    "title": "Tidy Data,Weighted Insights",
    "section": "Results",
    "text": "Results\n\nrecs_des\n\nCall: Called via srvyr\nUnstratified cluster jacknife (JK1) with 60 replicates and MSE variances.\nSampling variables:\n  - repweights: `NWEIGHT1 + NWEIGHT2 + NWEIGHT3 + NWEIGHT4 + NWEIGHT5 +\n    NWEIGHT6 + NWEIGHT7 + NWEIGHT8 + NWEIGHT9 + NWEIGHT10 + NWEIGHT11 +\n    NWEIGHT12 + NWEIGHT13 + NWEIGHT14 + NWEIGHT15 + NWEIGHT16 + NWEIGHT17 +\n    NWEIGHT18 + NWEIGHT19 + NWEIGHT20 + NWEIGHT21 + NWEIGHT22 + NWEIGHT23 +\n    NWEIGHT24 + NWEIGHT25 + NWEIGHT26 + NWEIGHT27 + NWEIGHT28 + NWEIGHT29 +\n    NWEIGHT30 + NWEIGHT31 + NWEIGHT32 + NWEIGHT33 + NWEIGHT34 + NWEIGHT35 +\n    NWEIGHT36 + NWEIGHT37 + NWEIGHT38 + NWEIGHT39 + NWEIGHT40 + NWEIGHT41 +\n    NWEIGHT42 + NWEIGHT43 + NWEIGHT44 + NWEIGHT45 + NWEIGHT46 + NWEIGHT47 +\n    NWEIGHT48 + NWEIGHT49 + NWEIGHT50 + NWEIGHT51 + NWEIGHT52 + NWEIGHT53 +\n    NWEIGHT54 + NWEIGHT55 + NWEIGHT56 + NWEIGHT57 + NWEIGHT58 + NWEIGHT59 +\n    NWEIGHT60` \n  - weights: NWEIGHT \nData variables: \n  - DOEID (dbl), ClimateRegion_BA (fct), Urbanicity (fct), Region (fct),\n    REGIONC (chr), Division (fct), STATE_FIPS (chr), state_postal (fct),\n    state_name (fct), HDD65 (dbl), CDD65 (dbl), HDD30YR (dbl), CDD30YR (dbl),\n    HousingUnitType (fct), YearMade (ord), TOTSQFT_EN (dbl), TOTHSQFT (dbl),\n    TOTCSQFT (dbl), SpaceHeatingUsed (lgl), ACUsed (lgl), HeatingBehavior\n    (fct), WinterTempDay (dbl), WinterTempAway (dbl), WinterTempNight (dbl),\n    ACBehavior (fct), SummerTempDay (dbl), SummerTempAway (dbl),\n    SummerTempNight (dbl), NWEIGHT (dbl), NWEIGHT1 (dbl), NWEIGHT2 (dbl),\n    NWEIGHT3 (dbl), NWEIGHT4 (dbl), NWEIGHT5 (dbl), NWEIGHT6 (dbl), NWEIGHT7\n    (dbl), NWEIGHT8 (dbl), NWEIGHT9 (dbl), NWEIGHT10 (dbl), NWEIGHT11 (dbl),\n    NWEIGHT12 (dbl), NWEIGHT13 (dbl), NWEIGHT14 (dbl), NWEIGHT15 (dbl),\n    NWEIGHT16 (dbl), NWEIGHT17 (dbl), NWEIGHT18 (dbl), NWEIGHT19 (dbl),\n    NWEIGHT20 (dbl), NWEIGHT21 (dbl), NWEIGHT22 (dbl), NWEIGHT23 (dbl),\n    NWEIGHT24 (dbl), NWEIGHT25 (dbl), NWEIGHT26 (dbl), NWEIGHT27 (dbl),\n    NWEIGHT28 (dbl), NWEIGHT29 (dbl), NWEIGHT30 (dbl), NWEIGHT31 (dbl),\n    NWEIGHT32 (dbl), NWEIGHT33 (dbl), NWEIGHT34 (dbl), NWEIGHT35 (dbl),\n    NWEIGHT36 (dbl), NWEIGHT37 (dbl), NWEIGHT38 (dbl), NWEIGHT39 (dbl),\n    NWEIGHT40 (dbl), NWEIGHT41 (dbl), NWEIGHT42 (dbl), NWEIGHT43 (dbl),\n    NWEIGHT44 (dbl), NWEIGHT45 (dbl), NWEIGHT46 (dbl), NWEIGHT47 (dbl),\n    NWEIGHT48 (dbl), NWEIGHT49 (dbl), NWEIGHT50 (dbl), NWEIGHT51 (dbl),\n    NWEIGHT52 (dbl), NWEIGHT53 (dbl), NWEIGHT54 (dbl), NWEIGHT55 (dbl),\n    NWEIGHT56 (dbl), NWEIGHT57 (dbl), NWEIGHT58 (dbl), NWEIGHT59 (dbl),\n    NWEIGHT60 (dbl), BTUEL (dbl), DOLLAREL (dbl), BTUNG (dbl), DOLLARNG (dbl),\n    BTULP (dbl), DOLLARLP (dbl), BTUFO (dbl), DOLLARFO (dbl), BTUWOOD (dbl),\n    TOTALBTU (dbl), TOTALDOL (dbl)"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#syntax",
    "href": "talks/talk-nchs-show-tell.html#syntax",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax",
    "text": "Syntax\nThe survey_mean() calculates means while taking into account the survey design elements.\nsurvey_mean(\n  x,\n  na.rm = FALSE,\n  vartype = c(\"se\", \"ci\", \"var\", \"cv\"),\n  level = 0.95,\n  proportion = FALSE,\n  prop_method = c(\"logit\", \"likelihood\", \"asin\", \"beta\", \"mean\"),\n  deff = FALSE,\n  df = NULL\n)"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-1",
    "href": "talks/talk-nchs-show-tell.html#implementation-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nCalculate the estimated average cost of electricity (DOLLAREL) in the United States:\n\nrecs_des %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL, \n                                    vartype = c(\"se\", \"ci\")))"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-2",
    "href": "talks/talk-nchs-show-tell.html#implementation-2",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nCalculate the estimated average cost of electricity (DOLLAREL) in the United States:\n\nrecs_des %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = c(\"se\", \"ci\")))\n\n\nUse the survey design object, not raw data"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-3",
    "href": "talks/talk-nchs-show-tell.html#implementation-3",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nCalculate the estimated average cost of electricity (DOLLAREL) in the United States:\n\nrecs_des %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = c(\"se\", \"ci\")))\n\n\nUse the survey design object, not raw data\nCall survey_mean() within summarize() function"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-4",
    "href": "talks/talk-nchs-show-tell.html#implementation-4",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nCalculate the estimated average cost of electricity (DOLLAREL) in the United States:\n\nrecs_des %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = c(\"se\", \"ci\")))\n\n\nUse the survey design object, not raw data\nCall survey_mean() within summarize() function\nSpecify the type of variance output, here we output the standard error and confidence interval"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#results-1",
    "href": "talks/talk-nchs-show-tell.html#results-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Results",
    "text": "Results\nCalculate the estimated average cost of electricity (DOLLAREL) in the United States:\n\nrecs_des %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = c(\"se\", \"ci\")))\n\n# A tibble: 1 × 4\n  elec_bill elec_bill_se elec_bill_low elec_bill_upp\n      &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;\n1     1380.         5.38         1369.         1391.\n\n\n\n\nEstimated average cost of electricity is in the first column\nStandard error is in the second column\nConfidence interval is in the third and fourth columns (lower bound, upper bound)\nThis is the standard R output, we will show later on how to make these into prettier tables"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#calculate-means-with-groups",
    "href": "talks/talk-nchs-show-tell.html#calculate-means-with-groups",
    "title": "Tidy Data,Weighted Insights",
    "section": "Calculate means with groups",
    "text": "Calculate means with groups\nCalculate the estimated average cost of electricity in the U.S. (DOLLAREL) by each region (Region) by including a group_by() function with the variable of interest before the summarize() function:\n\nrecs_des %&gt;%\n  group_by(Region) %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = c(\"se\", \"ci\")))"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#calculate-means-with-groups-1",
    "href": "talks/talk-nchs-show-tell.html#calculate-means-with-groups-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Calculate means with groups",
    "text": "Calculate means with groups\nCalculate the estimated average cost of electricity in the U.S. (DOLLAREL) by each region (Region) by including a group_by() function with the variable of interest before the summarize() function:\n\nrecs_des %&gt;%\n  group_by(Region) %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = c(\"se\", \"ci\")))\n\n\n\nWhen working with subgroups, need to subset (filter()) or define groups (group_by()) before calculating the estimates\nHere we are interested in cost of electrictiy for each of the U.S. Census Regions"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#calculate-means-with-groups-2",
    "href": "talks/talk-nchs-show-tell.html#calculate-means-with-groups-2",
    "title": "Tidy Data,Weighted Insights",
    "section": "Calculate means with groups",
    "text": "Calculate means with groups\nCalculate the estimated average cost of electricity in the U.S. (DOLLAREL) by each region (Region) by including a group_by() function with the variable of interest before the summarize() function:\n\nrecs_des %&gt;%\n  group_by(Region) %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = c(\"se\", \"ci\")))\n\n# A tibble: 4 × 5\n  Region    elec_bill elec_bill_se elec_bill_low elec_bill_upp\n  &lt;fct&gt;         &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;\n1 Northeast     1343.         14.6         1313.         1372.\n2 Midwest       1293.         11.7         1270.         1317.\n3 South         1548.         10.3         1527.         1568.\n4 West          1211.         12.0         1187.         1235.\n\n\n\n\nOutput has a row for each region"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#syntax-1",
    "href": "talks/talk-nchs-show-tell.html#syntax-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax",
    "text": "Syntax\nUse the svyttest() function to compare two proportions or means.\nSyntax:\nsvyttest(formula,\n         design,\n         ...)\n\n\nSimilar to t.test() function in base R with the formula and the data arguments"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-one-sample-t-test",
    "href": "talks/talk-nchs-show-tell.html#implementation-one-sample-t-test",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: one-sample t-test",
    "text": "Implementation: one-sample t-test\nStephanie usually sets her home to 68°F at night during the summer. Is this different from the average household in the U.S.?"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-one-sample-t-test-1",
    "href": "talks/talk-nchs-show-tell.html#implementation-one-sample-t-test-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: one-sample t-test",
    "text": "Implementation: one-sample t-test\nStephanie usually sets her home to 68°F at night during the summer. Is this different from the average household in the U.S.?\nFirst, look at the estimated average nighttime temperature U.S. households set their homes to during the summer (SummerTempNight).\n\nrecs_des %&gt;%\n  summarize(mu = survey_mean(SummerTempNight, na.rm = TRUE))\n\n# A tibble: 1 × 2\n     mu  mu_se\n  &lt;dbl&gt;  &lt;dbl&gt;\n1  71.4 0.0397\n\n\n\n\nNote if you don’t specify a variance type, the default is to output the standard error"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-one-sample-t-test-2",
    "href": "talks/talk-nchs-show-tell.html#implementation-one-sample-t-test-2",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: one-sample t-test",
    "text": "Implementation: one-sample t-test\nTest if the average U.S. household sets its temperature at a value different from 68°F using svyttest():\n\nrecs_des %&gt;%\n  svyttest(\n    formula = SummerTempNight - 68 ~ 0, \n    design = ., \n    na.rm = TRUE\n  )"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-one-sample-t-test-3",
    "href": "talks/talk-nchs-show-tell.html#implementation-one-sample-t-test-3",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: one-sample t-test",
    "text": "Implementation: one-sample t-test\nTest if the average U.S. household sets its temperature at a value different from 68°F using svyttest():\n\nrecs_des %&gt;%\n  svyttest(\n    formula = SummerTempNight - 68 ~ 0, \n    design = ., \n    na.rm = TRUE\n  )\n\n\nFormula to test if the true mean of SummerTempNight variable minus 68°F is equal to 0"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-one-sample-t-test-4",
    "href": "talks/talk-nchs-show-tell.html#implementation-one-sample-t-test-4",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: one-sample t-test",
    "text": "Implementation: one-sample t-test\nTest if the average U.S. household sets its temperature at a value different from 68°F using svyttest():\n\nrecs_des %&gt;%\n  svyttest(\n    formula = SummerTempNight - 68 ~ 0, \n    design = ., \n    na.rm = TRUE\n  )\n\n\nFormula to test if the true mean of SummerTempNight variable minus 68°F is equal to 0\nDot notation . that passes the recs_des object into the design argument"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#results-one-sample-t-test",
    "href": "talks/talk-nchs-show-tell.html#results-one-sample-t-test",
    "title": "Tidy Data,Weighted Insights",
    "section": "Results: one-sample t-test",
    "text": "Results: one-sample t-test\nTest if the average U.S. household sets its temperature at a value different from 68°F using svyttest():\n\nrecs_des %&gt;%\n  svyttest(\n    formula = SummerTempNight - 68 ~ 0,\n    design = .,\n    na.rm = TRUE\n  )\n\n\n    Design-based one-sample t-test\n\ndata:  SummerTempNight - 68 ~ 0\nt = 84.788, df = 58, p-value &lt; 2.2e-16\nalternative hypothesis: true mean is not equal to 0\n95 percent confidence interval:\n 3.287816 3.446810\nsample estimates:\n    mean \n3.367313 \n\n\n\n\nSample estimate mean is the difference between the U.S. average and Stephanie’s house\nResult: Stephanie keeps her house cold in the summer!"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-two-sample-t-test",
    "href": "talks/talk-nchs-show-tell.html#implementation-two-sample-t-test",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: two-sample t-test",
    "text": "Implementation: two-sample t-test\nOn average, is there a significant different electric bill for households with and without air-conditioning?"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-two-sample-t-test-1",
    "href": "talks/talk-nchs-show-tell.html#implementation-two-sample-t-test-1",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: two-sample t-test",
    "text": "Implementation: two-sample t-test\nOn average, is there a significant different electric bill for households with and without air-conditioning?\nFirst, look at the estimated average for households with and without air-condition.\n\nrecs_des %&gt;%\n  group_by(ACUsed) %&gt;%\n  summarize(mean = survey_mean(DOLLAREL, na.rm = TRUE))\n\n# A tibble: 2 × 3\n  ACUsed  mean mean_se\n  &lt;lgl&gt;  &lt;dbl&gt;   &lt;dbl&gt;\n1 FALSE  1056.   16.0 \n2 TRUE   1422.    5.69\n\n\n\n\nAdd in the group_by here to see the means for each group"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-two-sample-t-test-2",
    "href": "talks/talk-nchs-show-tell.html#implementation-two-sample-t-test-2",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: two-sample t-test",
    "text": "Implementation: two-sample t-test\nTest if the electricity expenditure is significantly different for homes with and without air-conditioning:\n\nrecs_des %&gt;%\n  svyttest(\n    formula = DOLLAREL ~ ACUsed,\n    design = ., \n    na.rm = TRUE\n  )"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-two-sample-t-test-3",
    "href": "talks/talk-nchs-show-tell.html#implementation-two-sample-t-test-3",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation: two-sample t-test",
    "text": "Implementation: two-sample t-test\nTest if the electricity expenditure is significantly different for homes with and without air-conditioning:\n\nrecs_des %&gt;%\n  svyttest(\n    formula = DOLLAREL ~ ACUsed,\n    design = ., \n    na.rm = TRUE\n  )\n\n\nFormula with electricity expenditure on the left and air-conditioning usage on the right"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#results-two-sample-t-test",
    "href": "talks/talk-nchs-show-tell.html#results-two-sample-t-test",
    "title": "Tidy Data,Weighted Insights",
    "section": "Results: two-sample t-test",
    "text": "Results: two-sample t-test\nTest if the electricity expenditure is significantly different for homes with and without air-conditioning:\n\nrecs_des %&gt;%\n  svyttest(\n    formula = DOLLAREL ~ ACUsed,\n    design = ., \n    na.rm = TRUE\n  )\n\n\n    Design-based t-test\n\ndata:  DOLLAREL ~ ACUsed\nt = 21.29, df = 58, p-value &lt; 2.2e-16\nalternative hypothesis: true difference in mean is not equal to 0\n95 percent confidence interval:\n 331.3343 400.1054\nsample estimates:\ndifference in mean \n          365.7199 \n\n\n\n\nHousehold with AC have higher electrical bill"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#syntax-2",
    "href": "talks/talk-nchs-show-tell.html#syntax-2",
    "title": "Tidy Data,Weighted Insights",
    "section": "Syntax",
    "text": "Syntax\nWith the {gt} package, supply the input data table to gt() and add options to modify and format your table.\ndata %&gt;%\n  gt() %&gt;%\n  ... add options here..."
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-5",
    "href": "talks/talk-nchs-show-tell.html#implementation-5",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nCreate a table for estimated average household electricity bill by region:\n\nrecs_tab &lt;- recs_des %&gt;%\n  group_by(Region) %&gt;%\n  summarize(elec_bill = survey_mean(DOLLAREL,\n                                    vartype = \"ci\"))\n\nrecs_tab\n\n# A tibble: 4 × 4\n  Region    elec_bill elec_bill_low elec_bill_upp\n  &lt;fct&gt;         &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;\n1 Northeast     1343.         1313.         1372.\n2 Midwest       1293.         1270.         1317.\n3 South         1548.         1527.         1568.\n4 West          1211.         1187.         1235."
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-6",
    "href": "talks/talk-nchs-show-tell.html#implementation-6",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nPipe (%&gt;%) your data frame (recs_tab) into the gt() function:\n\nrecs_tab %&gt;%\n  gt()\n\n\n\n\n\n\n\nCensus Region\nelec_bill\nelec_bill_low\nelec_bill_upp\n\n\n\n\nNortheast\n1342.647\n1313.386\n1371.907\n\n\nMidwest\n1293.233\n1269.827\n1316.639\n\n\nSouth\n1547.653\n1527.115\n1568.191\n\n\nWest\n1211.020\n1187.045\n1234.994"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-7",
    "href": "talks/talk-nchs-show-tell.html#implementation-7",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nContinue adding to your table, for example, designating Region as a “stub”:\n\nrecs_tab %&gt;%\n  gt(rowname_col = \"Region\")\n\n\n\n\n\n\n\n\nelec_bill\nelec_bill_low\nelec_bill_upp\n\n\n\n\nNortheast\n1342.647\n1313.386\n1371.907\n\n\nMidwest\n1293.233\n1269.827\n1316.639\n\n\nSouth\n1547.653\n1527.115\n1568.191\n\n\nWest\n1211.020\n1187.045\n1234.994"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-8",
    "href": "talks/talk-nchs-show-tell.html#implementation-8",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nAdd labels to columns:\n\nrecs_tab %&gt;%\n  gt(rowname_col = \"Region\") %&gt;%\n  cols_label(\n    elec_bill = \"Average\",\n    elec_bill_low = \"Lower\",\n    elec_bill_upp = \"Upper\"\n  )\n\n\n\n\n\n\n\n\nAverage\nLower\nUpper\n\n\n\n\nNortheast\n1342.647\n1313.386\n1371.907\n\n\nMidwest\n1293.233\n1269.827\n1316.639\n\n\nSouth\n1547.653\n1527.115\n1568.191\n\n\nWest\n1211.020\n1187.045\n1234.994"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-9",
    "href": "talks/talk-nchs-show-tell.html#implementation-9",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nAdd a spanner to break up the labels:\n\nrecs_tab %&gt;%\n  gt(rowname_col = \"Region\") %&gt;%\n  cols_label(\n    elec_bill = \"Average\",\n    elec_bill_low = \"Lower\",\n    elec_bill_upp = \"Upper\"\n  ) %&gt;%\n  tab_spanner(\n    label = \"Cost of electricity in the U.S. by region\",\n    columns = c(elec_bill, elec_bill_low, elec_bill_upp))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCost of electricity in the U.S. by region\n\n\n\nAverage\nLower\nUpper\n\n\n\n\nNortheast\n1342.647\n1313.386\n1371.907\n\n\nMidwest\n1293.233\n1269.827\n1316.639\n\n\nSouth\n1547.653\n1527.115\n1568.191\n\n\nWest\n1211.020\n1187.045\n1234.994"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#implementation-10",
    "href": "talks/talk-nchs-show-tell.html#implementation-10",
    "title": "Tidy Data,Weighted Insights",
    "section": "Implementation",
    "text": "Implementation\nFormat numbers using the fmt_*() functions:\n\nrecs_tab %&gt;%\n  gt(rowname_col = \"Region\") %&gt;%\n  cols_label(\n    elec_bill = \"Average\",\n    elec_bill_low = \"Lower\",\n    elec_bill_upp = \"Upper\"\n  ) %&gt;%\n  tab_spanner(\n    label = \"Cost of electricity in the U.S. by region\",\n    columns = c(elec_bill, elec_bill_low, elec_bill_upp)) %&gt;%\n  fmt_currency()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCost of electricity in the U.S. by region\n\n\n\nAverage\nLower\nUpper\n\n\n\n\nNortheast\n$1,342.65\n$1,313.39\n$1,371.91\n\n\nMidwest\n$1,293.23\n$1,269.83\n$1,316.64\n\n\nSouth\n$1,547.65\n$1,527.12\n$1,568.19\n\n\nWest\n$1,211.02\n$1,187.05\n$1,234.99"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#references",
    "href": "talks/talk-nchs-show-tell.html#references",
    "title": "Tidy Data,Weighted Insights",
    "section": "References",
    "text": "References\n\nFreedman Ellis, Greg, and Ben Schneider. 2024. srvyr: ’dplyr’-Like Syntax for Summary Statistics of Survey Data. http://gdfe.co/srvyr/.\nLumley, Thomas. 2010. Complex Surveys: A Guide to Analysis Using R. John Wiley & Sons. https://r-survey.r-forge.r-project.org/survey/.\nResearch Triangle Institute (2012). SUDAAN Language Manual, Volumes 1 and 2, Relase 11. Research Triangle Park, NC: Research Triangle Institute.\nSAS Institute Inc. 2023. SAS/STAT® 15.3 User’s Guide. Cary, NC: SAS Institute Inc. Introduction to Survey Sampling and Analysis Procedures\nZimmer, S. A., Powell, R. J., & Velásquez, I. C. (2024). Exploring Complex Survey Data Analysis Using R: A Tidy Introduction with {srvyr} and {survey}. Chapman & Hall: CRC Press. https://tidy-survey-r.github.io/tidy-survey-book/"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#where-to-find-our-book",
    "href": "talks/talk-nchs-show-tell.html#where-to-find-our-book",
    "title": "Tidy Data,Weighted Insights",
    "section": "Where to find our book",
    "text": "Where to find our book\nPrint copies:\n\nRoutledge\nYour local bookstore\nAmazon\n\nOnline version:\n\nhttps://tidy-survey-r.github.io/tidy-survey-book/"
  },
  {
    "objectID": "talks/talk-nchs-show-tell.html#q-a",
    "href": "talks/talk-nchs-show-tell.html#q-a",
    "title": "Tidy Data,Weighted Insights",
    "section": "Q & A",
    "text": "Q & A\n\n\n\n\n\nContact info will be shared in the chat"
  }
]